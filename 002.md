æŸ¥çœ‹docs\NEXT_DEVELOPMENT_GUIDE.md
è¦åŠƒå¯¦ç¾è—åœ–çš„
æ“ä½œå¯©è¨ˆæ—¥èªŒ (Audit Log)
æ™‚é–“è»¸æœå‹™ (Timeline Service)
æ–½å·¥æ—¥èªŒæ¨¡çµ„(Diary)
å¯¦æ–½å‰è«‹å…ˆä½¿ç”¨context7æŸ¥è©¢ç›¸é—œæŠ€è¡“æ–‡ä»¶ç¢ºä¿
ç¾ä»£åŒ– (Modernization)
ä¼æ¥­åŒ– (Enterprise-readiness)
çµæ§‹åŒ– (Structured)
é«˜å¯ç”¨ (High Availability / Reliability)
å®‰å…¨æ€§ (Security)
å¯æ“´å±•æ€§ (Scalability)
å¯è¿½è¹¤æ€§ (Traceability / Auditing)
å¯ç¶­è­·æ€§ (Maintainability)
ç”¨æˆ¶é«”é©— (User Experience / Developer Experience)
æ¨¡çµ„åŒ– (Modular / Componentized)ï¼šå‰ç«¯çµ„ä»¶å¯æ‹†åˆ†ã€å¾Œç«¯æœå‹™å¯æ“´å±•ã€‚
æ•´é«”å“è³ª ç”Ÿç”¢ç´š (Production-grade)ã€å¯é æ¸¬æ€§ (Predictability)ã€ä¸€è‡´æ€§ (Consistency)
é‹è¡Œç›£æ§ å¯è§€æ¸¬æ€§ (Observability)ã€é‹è¡ŒæŒ‡æ¨™ (Metrics)ã€å¥åº·æª¢æŸ¥ (Health Check / Heartbeat)
ä¸å¯è®Šæ€§ (Immutable Records)ã€Append-only Storageã€å¯©è¨ˆè­‰æ“šéˆ (Evidence Chain)
å° Audit Log èˆ‡ Diary ç‰¹åˆ¥é—œéµ
æ€§èƒ½	é«˜ååé‡ (High Throughput)ã€å»¶é²æ•æ„Ÿ (Latency-sensitive)ã€æ‰¹æ¬¡èˆ‡æµå¼è™•ç† (Batch & Streaming)
è³‡æ–™ç®¡ç†	å†·ç†±è³‡æ–™åˆ†å±¤ (Hot/Cold Storage)ã€TTL / è³‡æ–™ç”Ÿå‘½å‘¨æœŸç®¡ç† (Data Retention / Lifecycle Policy)
å½ˆæ€§	æ°´å¹³æ“´å±• (Horizontal Scaling)ã€åˆ†æ•£å¼æ¶æ§‹ (Distributed-ready)
æ™‚é–“è»¸æœå‹™ç‰¹åˆ¥é©ç”¨
UI/UX	å¯è¦–åŒ–å¯©è¨ˆæ—¥èªŒ (Audit Visualization)ã€Timeline Animationã€Context-aware Rendering
æ¨¡çµ„åŒ–	å¯æ’æ‹”å¼è¨­è¨ˆ (Pluggable)ã€å¯é…ç½®æ€§ (Configurable)ã€å–®ä¸€è·è²¬åŸå‰‡ (Single Responsibility Principle)
Audit Log	è¡Œç‚ºè­‰æ“šéˆ (Activity Chain)ã€æ“ä½œä¸Šä¸‹æ–‡ (Execution Context)ã€å¯©è¨ˆäº‹ä»¶åˆ†é¡ (Event Taxonomy)ã€è·¨ç³»çµ±äº‹ä»¶èšåˆ (Cross-domain Aggregation)
Timeline Service	äº‹ä»¶æ™‚é–“åº (Temporal Ordering)ã€å› æœä¸€è‡´æ€§ (Causal Consistency)ã€è·¨æ¨¡çµ„äº‹ä»¶å°é½Š (Cross Module Sync)ã€è¦–åœ–æŠ•å½± (Projection Model)
Diary	ç¾å ´è­‰æ“šç´€éŒ„ (Field Evidence Records)ã€æ–½å·¥ä¸Šä¸‹æ–‡ (Construction Context)ã€å·¥ä½œæµé€£çµ (Workflow-bound Notes)ã€äººæ©Ÿå”ä½œè¨»è¨˜ (Human-in-the-loop Logging)

å¦‚éœ€è¦æ¸¬è©¦
å¸³è™Ÿac7x@pm.me
å¯†ç¢¼123123

è¦åŠƒå¯¦ç¾è—åœ–çš„
å“ç®¡æ¨¡çµ„
é©—æ”¶æ¨¡çµ„
ä»»å‹™æäº¤å®Œæˆ>æ—¥èªŒå¯å‹¾é¸>å“ç®¡æª¢æŸ¥>é©—æ”¶>é©—æ”¶æˆåŠŸ
ä»»å‹™æäº¤å®Œæˆ>æ—¥èªŒå¯å‹¾é¸>å“ç®¡æª¢æŸ¥>é©—æ”¶>é©—æ”¶å¤±æ•—>å•é¡Œ[ç¼ºå¤±]>ä¿®ç¹•>




æŸ¥çœ‹docs\NEXT_DEVELOPMENT_GUIDE.md
è¦åŠƒå¯¦ç¾è—åœ–çš„è²¡å‹™æ¨¡çµ„
å¯¦æ–½å‰è«‹å…ˆä½¿ç”¨context7æŸ¥è©¢ç›¸é—œæŠ€è¡“æ–‡ä»¶ç¢ºä¿
ç¾ä»£åŒ– (Modernization)
ä¼æ¥­åŒ– (Enterprise-readiness)
çµæ§‹åŒ– (Structured)
é«˜å¯ç”¨ (High Availability / Reliability)
å®‰å…¨æ€§ (Security)
å¯æ“´å±•æ€§ (Scalability)
å¯è¿½è¹¤æ€§ (Traceability / Auditing)
å¯ç¶­è­·æ€§ (Maintainability)
ç”¨æˆ¶é«”é©— (User Experience / Developer Experience)
æ¨¡çµ„åŒ– (Modular / Componentized)ï¼šå‰ç«¯çµ„ä»¶å¯æ‹†åˆ†ã€å¾Œç«¯æœå‹™å¯æ“´å±•ã€‚
æ•´é«”å“è³ª ç”Ÿç”¢ç´š (Production-grade)ã€å¯é æ¸¬æ€§ (Predictability)ã€ä¸€è‡´æ€§ (Consistency)
é‹è¡Œç›£æ§ å¯è§€æ¸¬æ€§ (Observability)ã€é‹è¡ŒæŒ‡æ¨™ (Metrics)ã€å¥åº·æª¢æŸ¥ (Health Check / Heartbeat)
ä¸å¯è®Šæ€§ (Immutable Records)ã€Append-only Storageã€å¯©è¨ˆè­‰æ“šéˆ (Evidence Chain)
å° Audit Log èˆ‡ Diary ç‰¹åˆ¥é—œéµ
æ€§èƒ½	é«˜ååé‡ (High Throughput)ã€å»¶é²æ•æ„Ÿ (Latency-sensitive)ã€æ‰¹æ¬¡èˆ‡æµå¼è™•ç† (Batch & Streaming)
è³‡æ–™ç®¡ç†	å†·ç†±è³‡æ–™åˆ†å±¤ (Hot/Cold Storage)ã€TTL / è³‡æ–™ç”Ÿå‘½å‘¨æœŸç®¡ç† (Data Retention / Lifecycle Policy)
å½ˆæ€§	æ°´å¹³æ“´å±• (Horizontal Scaling)ã€åˆ†æ•£å¼æ¶æ§‹ (Distributed-ready)
æ™‚é–“è»¸æœå‹™ç‰¹åˆ¥é©ç”¨
UI/UX	å¯è¦–åŒ–å¯©è¨ˆæ—¥èªŒ (Audit Visualization)ã€Timeline Animationã€Context-aware Rendering
æ¨¡çµ„åŒ–	å¯æ’æ‹”å¼è¨­è¨ˆ (Pluggable)ã€å¯é…ç½®æ€§ (Configurable)ã€å–®ä¸€è·è²¬åŸå‰‡ (Single Responsibility Principle)
Audit Log	è¡Œç‚ºè­‰æ“šéˆ (Activity Chain)ã€æ“ä½œä¸Šä¸‹æ–‡ (Execution Context)ã€å¯©è¨ˆäº‹ä»¶åˆ†é¡ (Event Taxonomy)ã€è·¨ç³»çµ±äº‹ä»¶èšåˆ (Cross-domain Aggregation)
Timeline Service	äº‹ä»¶æ™‚é–“åº (Temporal Ordering)ã€å› æœä¸€è‡´æ€§ (Causal Consistency)ã€è·¨æ¨¡çµ„äº‹ä»¶å°é½Š (Cross Module Sync)ã€è¦–åœ–æŠ•å½± (Projection Model)
Diary	ç¾å ´è­‰æ“šç´€éŒ„ (Field Evidence Records)ã€æ–½å·¥ä¸Šä¸‹æ–‡ (Construction Context)ã€å·¥ä½œæµé€£çµ (Workflow-bound Notes)ã€äººæ©Ÿå”ä½œè¨»è¨˜ (Human-in-the-loop Logging)

å¦‚éœ€è¦æ¸¬è©¦
å¸³è™Ÿac7x@pm.me
å¯†ç¢¼123123

æŸ¥çœ‹docs\NEXT_DEVELOPMENT_GUIDE.md
è¦åŠƒå¯¦ç¾è—åœ–
å“ç®¡æ¨¡çµ„
é©—æ”¶æ¨¡çµ„
å•é¡Œæ¨¡çµ„

ä»»å‹™æäº¤ (Task Submission)
        â†“
æ—¥èªŒç´€éŒ„èˆ‡å‹¾é¸ (Diary / Evidence Logging)
        â†“
å“ç®¡æª¢æŸ¥ (Quality Control / QC Inspection)
        â†“
é©—æ”¶æµç¨‹ (Acceptance)
        â”œâ”€â”€ é©—æ”¶æˆåŠŸ â†’ ä»»å‹™çµæ¡ˆ (Close Task)
        â””â”€â”€ é©—æ”¶å¤±æ•— â†’ å•é¡Œæ¨¡çµ„ (Problem Management)
                         â†“
                    å•é¡Œè™•ç½®æµç¨‹ (Problem Handling Workflow)
                         â†“
               å›åˆ°ã€Œå“ç®¡æª¢æŸ¥ã€æˆ–ã€Œé©—æ”¶ã€ï¼Œç›´åˆ°æˆåŠŸ


ä»»å‹™æ¨¡çµ„ (Task Module)	ä»»å‹™å»ºç«‹ã€åˆ†æ´¾ã€é€²åº¦ã€æäº¤å®Œæˆäº‹ä»¶	ä¸åšæ—¥èªŒ/å“ç®¡/é©—æ”¶é‚è¼¯
æ–½å·¥æ—¥èªŒæ¨¡çµ„ (Diary Module)	ç¾å ´ç´€éŒ„ã€ç…§ç‰‡ã€ææ–™ã€é€²åº¦ã€è­‰æ“šå‹¾é¸	ä¸åšåˆ¤æ–·ï¼Œåƒ…åšã€Œäº‹å¯¦ç´€éŒ„ã€
å“ç®¡æ¨¡çµ„ (Quality Control Module)	ä¾æ¨™æº–æª¢æŸ¥æ—¥èªŒèˆ‡æˆæœï¼Œç”¢ç”Ÿã€Œå¯å¦é€²å…¥é©—æ”¶ã€çš„èªå®š	ä¸åšçµæ¡ˆèˆ‡åˆæ ¼è£æ±º
é©—æ”¶æ¨¡çµ„ (Acceptance Module)	æœ€çµ‚åˆæ ¼åˆ¤æ–·ã€å¯©æ‰¹ã€è­‰æ˜æ–‡ä»¶ã€å¯è¿½æº¯å¯©è¨ˆ	ä¸é€²è¡Œç¼ºå¤±è™•ç†
å•é¡Œæ¨¡çµ„ (Problem Module)

| Classification | Keyword                 | Description / Purpose                             |
| -------------- | ----------------------- | ------------------------------------------------- |
| æ ¸å¿ƒæ¦‚å¿µ           | Problem Management      | çµ±ä¸€ç®¡ç†æ‰€æœ‰éé æœŸäº‹é …                                       |
| å•é¡Œé¡å‹           | Issue Type              | Defect, Risk, Gap, Improvement Request, CR        |
| å•é¡Œè·¯å¾‘           | Problem Lifecycle       | Open â†’ Assess â†’ Assign â†’ Resolve â†’ Verify â†’ Close |
| å•é¡Œè©•ä¼°           | Impact Assessment       | å½±éŸ¿å±¤ç´šã€æˆæœ¬ã€é¢¨éšªã€æ™‚ç¨‹å½±éŸ¿                                   |
| å•é¡Œåˆ†æ´¾           | Assignment Matrix       | ä¾è§’è‰²æ¬Šé™èˆ‡è²¬ä»»é€²è¡Œåˆ†æ´¾                                      |
| è™•ç½®æµç¨‹           | Resolution Workflow     | ä¿®å¾©ã€æ›¿ä»£æ–¹æ¡ˆã€æµç¨‹æ”¹å–„ã€æ•™è‚²è¨“ç·´ç­‰                                |
| é©—è­‰æµç¨‹           | Resolution Verification | å›åˆ° QC æˆ–é©—æ”¶é‡æ–°æª¢æŸ¥                                     |
| å„ªå…ˆç´šç®¡ç†          | Severity / Priority     | Critical / High / Medium / Low                    |
| é¢¨éšªé è­¦           | Risk Flag               | é«˜é¢¨éšªä»»å‹™éœ€é¡å¤–å¯©æ ¸                                        |
| å¯è¿½è¹¤æ€§           | Traceability            | å•é¡Œä¸²è¯ä»»å‹™ã€æ—¥èªŒã€æª”æ¡ˆã€è²¬ä»»äºº                                  |
| çŸ¥è­˜å›é¥‹           | Knowledge Base          | å•é¡Œè§£æ±ºå¾Œè½‰ç‚ºçŸ¥è­˜è³‡æ–™                                       |
| å ±è¡¨è¼¸å‡º           | Problem Insights        | å•é¡Œçµ±è¨ˆã€è¶¨å‹¢ã€è²¬ä»»é …è¿½è¹¤                                     |

å¯¦æ–½å‰è«‹å…ˆä½¿ç”¨context7æŸ¥è©¢ç›¸é—œæŠ€è¡“æ–‡ä»¶ç¢ºä¿

| ---- | ----------------------- |
| ç¾ä»£åŒ–  | Modernization           |
| ä¼æ¥­åŒ–  | Enterprise-readiness    |
| çµæ§‹åŒ–  | Structured Architecture |
| ç”Ÿç”¢ç´š  | Production-grade        |
| ä¸€è‡´æ€§  | Consistency             |
| å¯é æ¸¬æ€§ | Predictability          |

| ä¸­æ–‡è©æ¢       | è‹±æ–‡è©æ¢                    |
| ---------- | ----------------------- |
| é«˜å¯ç”¨        | High Availability       |
| å¯é æ€§        | Reliability             |
| å¯æ“´å±•æ€§ / å»¶å±•æ€§ | Scalability             |
| å¯ç¶­è­·æ€§       | Maintainability         |
| å¯è§€æ¸¬æ€§       | Observability           |
| å¯è¿½è¹¤æ€§       | Traceability / Auditing |
| å®‰å…¨æ€§        | Security                |
| åˆè¦æ€§        | Compliance              |

| -------- | ------------------------------- |
| æ¨¡çµ„åŒ–      | Modular / Componentized         |
| è§£è€¦       | Decoupled / Loose Coupling      |
| èšåˆæ ¹ï¼ˆDDDï¼‰ | Aggregate Root                  |
| é ˜åŸŸé‚Šç•Œ     | Bounded Context                 |
| ç”Ÿå‘½é€±æœŸç®¡ç†   | Lifecycle Management            |
| ç‹€æ…‹æ©Ÿ      | State Machine                   |
| äº‹ä»¶é©…å‹•     | Event-driven Architecture (EDA) |

| ----- | -------------------------- |
| é–‰ç’°ç®¡ç†  | Closed-loop Control        |
| å›é¥‹è¿´è·¯  | Feedback Loop              |
| æ¨™æº–åŒ–   | Standardization            |
| è²¬ä»»åˆ†ç•Œ  | Responsibility Segregation |
| å¯©æ ¸èƒ½åŠ›  | Auditability               |
| å·¥ä½œæµå¼•æ“ | Workflow Engine            |

| ----- | ------------------------- |
| ç”¨æˆ¶é«”é©—  | User Experience (UX)      |
| é–‹ç™¼è€…é«”é©— | Developer Experience (DX) |
| å¯é…ç½®æ€§  | Configurability           |
| è‡ªå‹•åŒ–   | Automation                |
| æ´å¯Ÿèˆ‡å ±è¡¨ | Insights & Analytics      |

| --------- | ---------------------------------- |
| å“ç®¡æ¨¡çµ„      | Quality Control Module (QC Module) |
| é©—æ”¶æ¨¡çµ„      | Acceptance Module                  |
| å•é¡Œæ¨¡çµ„      | Problem Management Module          |
| å•é¡Œç”Ÿå‘½å‘¨æœŸ    | Problem Lifecycle                  |
| å•é¡Œæ±        | Issue Pool                         |
| æ•´æ”¹ / è™•ç½®æµç¨‹ | Resolution Workflow                |
| å†é©—è­‰ / å†é©—æ”¶ | Re-verification / Re-acceptance    |

æ¦‚è¦½ï¼ˆDashboardï¼‰
æª”æ¡ˆï¼ˆDocuments / Deliverablesï¼‰
æ´»å‹•ï¼ˆTasks / Activitiesï¼‰
é€²åº¦ï¼ˆProgress / Milestonesï¼‰
æ—¥èªŒï¼ˆLogs / Auditï¼‰
å“ç®¡ï¼ˆQuality Assuranceï¼‰
é©—æ”¶ï¼ˆAcceptanceï¼‰
è²¡å‹™ï¼ˆFinanceï¼‰
è¨­ç½®ï¼ˆSettingsï¼‰

è§’è‰²èˆ‡æ¬Šé™ï¼ˆRBAC / IAMï¼‰
é€šçŸ¥ä¸­å¿ƒï¼ˆInbox / Alertsï¼‰
å·¥ä½œæµç¨‹å¼•æ“ï¼ˆWorkflow / Lifecycleï¼‰
é¢¨éšªç®¡ç†ï¼ˆRisk Registerï¼‰
è³‡æºèˆ‡äººåŠ›ç®¡ç†ï¼ˆResource / HR Liteï¼‰
åˆè¦ / ç¨½æ ¸ï¼ˆCompliance / Audit Governanceï¼‰
çœ‹æ¿ / ç”˜ç‰¹åœ–ï¼ˆKanban / Ganttï¼‰
å ±è¡¨ä¸­å¿ƒï¼ˆBI / Reportsï¼‰
æ¡è³¼ / ä¾›æ‡‰å•†ï¼ˆProcurement / Vendorï¼‰
è¨­å‚™ / è³‡ç”¢ç®¡ç†ï¼ˆAssetsï¼‰
è®Šæ›´ç®¡ç†ï¼ˆChange Controlï¼‰
æ–‡ä»¶ç‰ˆæ§ï¼ˆVersioningï¼‰
å¯©æŸ¥ä¸­å¿ƒï¼ˆReview Boardï¼‰


å·¥ä½œæµç¨‹å¼•æ“ï¼ˆWorkflow / Lifecycleï¼‰
é¢¨éšªç®¡ç†ï¼ˆRisk Registerï¼‰
çœ‹æ¿ / ç”˜ç‰¹åœ–ï¼ˆKanban / Ganttï¼‰
å ±è¡¨ä¸­å¿ƒï¼ˆBI / Reportsï¼‰
é‡Œç¨‹ç¢‘ç®¡ç†ç³»çµ±
ç‰ˆæœ¬æ§åˆ¶ç³»çµ±
æ¨™ç±¤ç³»çµ± 
è©•è«–ç³»çµ± 
é™„ä»¶ç®¡ç†ç³»çµ±
å ±è¡¨å¼•æ“
ç”˜ç‰¹åœ–å¼•æ“
å„€è¡¨æ¿å¼•æ“

é¢¨éšªç®¡ç†åŸºç¤ (Risk Management) â­â­â­
è³‡æºç®¡ç†åŸºç¤ (Resource Management) â­â­â­
æ¡è³¼ç®¡ç†åŸºç¤ (Procurement) â­â­
è³‡ç”¢ç®¡ç†åŸºç¤ (Asset Management) â­â­
è®Šæ›´ç®¡ç†åŸºç¤ (Change Control) â­â­â­


src\app\routes\demo\dashboard
analysis é©åˆè²¡å‹™
v1 é©åˆå€‹äºº / åœ˜éšŠ
monitor é©åˆçµ„ç¹”
workplace é©åˆè—åœ–
ä½¿ç”¨context7æŸ¥è©¢è¨­è¨ˆæ–‡ä»¶,åœ¨å°UIæ§‹å»º,ä½¿æ¨£å¼æ›´ç¾ä»£åŒ–
(é¸ç”¨)
æ¸¬è©¦å¸³è™Ÿæ˜¯ac7x@pm.me
å¯†ç¢¼æ˜¯123123




ç”¨æ–¼è²¡å‹™
http://localhost:4200/#/dashboard/analysis

ç”¨æ–¼çµ„ç¹”
http://localhost:4200/#/dashboard/monitor

ç”¨æ–¼è—åœ–
http://localhost:4200/#/dashboard/workplace


ç”¨æ–¼å€‹äºº/åœ˜éšŠ
http://localhost:4200/#/dashboard/v1

å¿«é€Ÿåƒè€ƒè¡¨
Dashboard	å€‹äºº	çµ„ç¹”	åœ˜éšŠ	è—åœ–
Analysis	âŒ	âœ…	âŒ	âœ…
Monitor	        âŒ	âœ…	âŒ	âœ…
V1	        âœ…	âŒ	âœ…	âŒ
Workplace	âœ…	âŒ	âœ…	âŒ

ä½¿ç”¨supabase MCP æŸ¥çœ‹æ—¢æœ‰æ•¸æ“šåº«,ç„¶å¾Œåˆ†æå¦‚ä½•æ“´å±•è²¡å‹™åŠŸèƒ½[ä»¥æä¾›å¦‚ä¸‹è‰åœ–]å› ç‚ºæœƒæ¶‰åŠåˆ°å¤šæ¬¡æ”¶ä»˜æ¬¾èˆ‡è«‹æ¬¾ç‹€æ…‹æ”¶æ¬¾ç‹€æ…‹ç­‰
å…ˆç”¨context7æŸ¥çœ‹æœ€ç¾ä»£åŒ–çš„ç›¸é—œæ–‡ä»¶ä¸¦åˆ†æå¦‚ä½•å¯¦ç¾ç„¶å¾Œå›è¦†åœ¨RP

æ“´å±•è¨ˆåŠƒæ›¸ åˆ†æå¦‚ä½•å¾supabase\seeds\init.sql æ“´å±• contractsï¼ˆåˆç´„ï¼é ç®—èµ·é»ï¼‰ expensesï¼ˆæˆæœ¬æ”¯å‡ºç´€éŒ„ï¼‰ payment_requestsï¼ˆè«‹æ¬¾å–®ï¼‰(ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸ lifecycle) paymentsï¼ˆä»˜æ¬¾ç´€éŒ„ï¼‰ æ¯å¼µéƒ½å¸¶ blueprint_id
è¦é»ï¼š
æ¦‚å¿µ	åŸå‰‡
èˆ‡ Blueprint æ¥è»Œ	æ¯å¼µè¡¨çš†å¸¶ blueprint_id
æ¬Šé™æ²¿ç”¨	blueprint_members / roles ä¸éœ€æ”¹å‹•
ç‹€æ…‹æ©Ÿ	æ²¿ç”¨ lifecycle_transitionsï¼Œä¸æ–°å¢ status enum
å¯æ“´å±•æ€§é«˜	å¾ŒçºŒå¯åŠ å…¥ change_orders / vendors / tax / retainage

(1) contracts â€” åˆç´„ & é ç®—èµ·é»
CREATE TABLE contracts (
  id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  blueprint_id BIGINT NOT NULL REFERENCES blueprints(id) ON DELETE CASCADE,
  vendor_name TEXT,           -- å¯æ“´å±• vendor æ¨¡çµ„
  contract_amount NUMERIC(18,2) NOT NULL,
  start_date DATE,
  end_date DATE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

(2) expenses â€” æˆæœ¬å¯¦éš›æŠ•å…¥ç´€éŒ„
CREATE TABLE expenses (
  id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  blueprint_id BIGINT NOT NULL REFERENCES blueprints(id) ON DELETE CASCADE,
  contract_id BIGINT REFERENCES contracts(id) ON DELETE SET NULL,
  title TEXT NOT NULL,
  amount NUMERIC(18,2) NOT NULL,
  expense_date DATE NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

(3) payment_requests â€” è«‹æ¬¾å–® (ä½¿ç”¨ lifecycle)
CREATE TABLE payment_requests (
  id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  blueprint_id BIGINT NOT NULL REFERENCES blueprints(id) ON DELETE CASCADE,
  contract_id BIGINT REFERENCES contracts(id) ON DELETE SET NULL,
  requested_amount NUMERIC(18,2) NOT NULL,
  lifecycle blueprint_lifecycle NOT NULL DEFAULT 'draft',  -- ğŸ”¥ ç”¨ä½ ç¾æœ‰ enum
  request_date DATE NOT NULL DEFAULT CURRENT_DATE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

(4) payments â€” å¯¦éš›ä»˜æ¬¾ç´€éŒ„
CREATE TABLE payments (
  id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  payment_request_id BIGINT NOT NULL REFERENCES payment_requests(id) ON DELETE CASCADE,
  paid_amount NUMERIC(18,2) NOT NULL,
  paid_at DATE NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

ç‹€æ…‹æ©Ÿï¼ˆLifecycleï¼‰è§¸ç™¼å™¨è‰åœ–
CREATE OR REPLACE FUNCTION payment_request_lifecycle_trigger()
RETURNS TRIGGER AS $$
BEGIN
  IF NEW.lifecycle IS DISTINCT FROM OLD.lifecycle THEN
    INSERT INTO lifecycle_transitions (
      entity_type,
      entity_id,
      from_state,
      to_state,
      changed_by,
      metadata
    ) VALUES (
      'payment_request',
      NEW.id,
      OLD.lifecycle,
      NEW.lifecycle,
      auth.uid(),
      jsonb_build_object('note', 'lifecycle changed')
    );
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;


æŸ¥çœ‹docs\NEXT_DEVELOPMENT_GUIDE.md
åˆ†æä¸‹åˆ—é€™å…©å€‹æª”æ¡ˆé©åˆæ”¹é€ æˆç”šéº¼æ¨£å­
src\app\layout\basic\widgets\task.component.ts
src\app\layout\basic\widgets\notify.component.ts
èƒ½æˆç‚ºæˆ‘å€‘è¦åŠƒä¸­çš„åŠ©åŠ›è€Œä¸æ˜¯ä¸€å€‹DEMO




å°éƒ¨ä»¶
src\app\layout\basic\widgets\icon.component.ts

æœç´¢
src\app\layout\basic\widgets\search.component.ts



æŸ¥çœ‹docs\NEXT_DEVELOPMENT_GUIDE.md
è¦åŠƒå¯¦ç¾"æª”æ¡ˆç®¡ç†åŸºç¤ (File Infrastructure)"ä½¿ç”¨"supabase storage"
ä¸¦ä¸”ä½¿src\app\layout\basic\widgets\icon.component.ts èƒ½æˆç‚ºæˆ‘å€‘è¦åŠƒä¸­çš„åŠ©åŠ›è€Œä¸æ˜¯ä¸€å€‹DEMO
å¯¦æ–½å‰è«‹å…ˆä½¿ç”¨context7æŸ¥è©¢ç›¸é—œæŠ€è¡“æ–‡ä»¶ç¢ºä¿
ç¾ä»£åŒ– (Modernization)
ä¼æ¥­åŒ– (Enterprise-readiness)
çµæ§‹åŒ– (Structured)
é«˜å¯ç”¨ (High Availability / Reliability)
å®‰å…¨æ€§ (Security)
å¯æ“´å±•æ€§ (Scalability)
å¯è¿½è¹¤æ€§ (Traceability / Auditing)
å¯ç¶­è­·æ€§ (Maintainability)
ç”¨æˆ¶é«”é©— (User Experience / Developer Experience)
ä¸¦èˆ‡ng-zorro-antdè‰¯å¥½æ­é…



æŸ¥çœ‹docs\NEXT_DEVELOPMENT_GUIDE.md
è¦åŠƒå¯¦ç¾"æœå°‹å¼•æ“ (Search Engine) "
ä¸¦ä¸”ä½¿src\app\layout\basic\widgets\search.component.ts èƒ½æˆç‚ºæˆ‘å€‘è¦åŠƒä¸­çš„åŠ©åŠ›è€Œä¸æ˜¯ä¸€å€‹DEMO
å¯¦æ–½å‰è«‹å…ˆä½¿ç”¨context7æŸ¥è©¢ç›¸é—œæŠ€è¡“æ–‡ä»¶ç¢ºä¿
ç¾ä»£åŒ– (Modernization)
ä¼æ¥­åŒ– (Enterprise-readiness)
çµæ§‹åŒ– (Structured)
é«˜å¯ç”¨ (High Availability / Reliability)
å®‰å…¨æ€§ (Security)
å¯æ“´å±•æ€§ (Scalability)
å¯è¿½è¹¤æ€§ (Traceability / Auditing)
å¯ç¶­è­·æ€§ (Maintainability)
ç”¨æˆ¶é«”é©— (User Experience / Developer Experience)
é«˜æ•ˆæœå°‹ (Efficient Search / Fast Querying)ï¼šå„ªåŒ–æŸ¥è©¢é‚è¼¯ï¼Œæ”¯æ´ç´¢å¼•ã€å…¨æ–‡æª¢ç´¢ã€åˆ†é ã€‚
ä½å»¶é² (Low Latency / Response Time)ï¼šç¢ºä¿ç”¨æˆ¶æ“ä½œåŠæ™‚åé¥‹ã€‚
ç·©å­˜ç­–ç•¥ (Caching / Memoization)ï¼šæ¸›å°‘é‡è¤‡è«‹æ±‚ï¼Œæé«˜æ•ˆç‡ã€‚
æ¨¡çµ„åŒ– (Modular / Componentized)ï¼šå‰ç«¯çµ„ä»¶å¯æ‹†åˆ†ã€å¾Œç«¯æœå‹™å¯æ“´å±•ã€‚
å¾®æœå‹™å…¼å®¹ (Microservices-ready / API-first)ï¼šæ–¹ä¾¿æœªä¾†å¾Œç«¯æ‹†åˆ†æˆ–é›²åŒ–ã€‚
åˆ†å±¤æ¶æ§‹ (Layered / Clean Architecture)ï¼šåˆ†é›¢ UIã€æ¥­å‹™é‚è¼¯ã€è³‡æ–™å±¤ã€‚
æˆæ¬Šèˆ‡èªè­‰ (Authentication / Authorization)ï¼šæ”¯æ´ JWTã€OAuth ç­‰ã€‚
è³‡æ–™éš±ç§ (Data Privacy / GDPR / PII-safe)ï¼šæ•æ„Ÿè³‡æ–™ä¿è­·ã€‚
è¼¸å…¥é©—è­‰ (Input Validation / Sanitization)ï¼šé˜²æ­¢ SQL æ³¨å…¥ã€XSSã€‚
æ—¥èªŒèˆ‡è¿½è¹¤ (Logging / Auditing / Tracing)ï¼šæ–¹ä¾¿ Debug èˆ‡é‹ç¶­ã€‚
ç›£æ§èˆ‡è­¦å ± (Monitoring / Alerts / Metrics)ï¼šæ”¯æ´ Prometheusã€Grafanaã€‚
å–®å…ƒæ¸¬è©¦ / é›†æˆæ¸¬è©¦ (Unit Test / Integration Test / Test Coverage)
ä»£ç¢¼è¦ç¯„ (Coding Standards / Lint / Prettier)
æ–‡æª”èˆ‡æ³¨é‡‹ (Documentation / Docstrings / Self-describing Code)
éŸ¿æ‡‰å¼è¨­è¨ˆ (Responsive / Adaptive UI)
å¯è¨ªå•æ€§ (Accessibility / a11y)
äº’å‹•èˆ‡æç¤º (Interactive / Feedback / Loading Indicators / Skeleton Screens)
é–‹ç™¼è€…å·¥å…·å‹å¥½ (DevTools-friendly / Hot Reload / Storybook)
æ™ºèƒ½æœå°‹ (Intelligent / AI-assisted / Relevance Ranking / Synonyms / Fuzzy Matching)
é«˜ç´šéæ¿¾ (Advanced Filtering / Faceted Search / Multi-criteria Search)
è‡ªå‹•è£œå…¨ (Autocomplete / Typeahead / Suggestions)
å¤šèªè¨€ / æœ¬åœ°åŒ– (i18n / l10n / Unicode support)
ä¸¦èˆ‡ng-zorro-antdè‰¯å¥½æ­é…

