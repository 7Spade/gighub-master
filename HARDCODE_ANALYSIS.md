# ç¡¬ç·¨ç¢¼å•é¡Œåˆ†æå ±å‘Š

## ç”¨æˆ¶è³ªç–‘ï¼šã€Œéƒ½ç¡¬ç·¨ç¢¼é‚„èƒ½éŒ¯ï¼Ÿã€

### å•é¡Œæ¾„æ¸…

æ‚¨èªªå¾—å°ï¼ç¡¬ç·¨ç¢¼çš„æ¸¬è©¦å¸³è™Ÿæœ¬èº«**æ²’æœ‰éŒ¯èª¤**ï¼š

```typescript
const TEST_USER = {
  email: 'ac7x@pm.me',    // âœ… æ ¼å¼æ­£ç¢º
  password: '123123'       // âœ… ç¬¦åˆæœ€å°é•·åº¦è¦æ±‚ (6å­—ç¬¦)
};
```

### çœŸæ­£çš„å•é¡Œ

**ä¸æ˜¯ç¨‹å¼ç¢¼éŒ¯èª¤ï¼Œè€Œæ˜¯ç¶²è·¯ç’°å¢ƒé™åˆ¶**

#### è¨ºæ–·çµæœ

```bash
$ curl -I https://obwyowvbsnqsxsnlsbhl.supabase.co/
curl: (6) Could not resolve host: obwyowvbsnqsxsnlsbhl.supabase.co
```

#### å•é¡Œéˆ
1. âœ… æ¸¬è©¦ç¨‹å¼ç¢¼æ­£ç¢º
2. âœ… ç¡¬ç·¨ç¢¼å¸³è™Ÿæ ¼å¼æ­£ç¢º
3. âœ… Playwright æ¸¬è©¦æ¡†æ¶é‹ä½œæ­£å¸¸
4. âœ… Angular æ‡‰ç”¨å•Ÿå‹•æˆåŠŸ
5. âœ… ç™»å…¥è¡¨å–®è¼‰å…¥æ­£å¸¸
6. âœ… è¡¨å–®é©—è­‰é€šé
7. âœ… API å‘¼å«ç™¼é€
8. âŒ **DNS è§£æå¤±æ•—** â† é€™è£¡å‡ºå•é¡Œ
9. âŒ ç„¡æ³•é€£æ¥åˆ° Supabase ä¼ºæœå™¨
10. âŒ èªè­‰å¤±æ•— "Failed to fetch"

### è­‰æ“š

#### 1. è¡¨å–®é©—è­‰é€šé
å¾éŒ¯èª¤ä¸Šä¸‹æ–‡å¯ä»¥çœ‹åˆ°ï¼š
```yaml
- textbox "Email" [ref=e33]: ac7x@pm.me    # âœ… Email å·²å¡«å…¥
- textbox "Password" [ref=e43]: "123123"   # âœ… å¯†ç¢¼å·²å¡«å…¥
- button "Login" [active] [ref=e54]        # âœ… æŒ‰éˆ•å¯é»æ“Šï¼ˆè¡¨ç¤ºè¡¨å–®é©—è­‰é€šéï¼‰
```

#### 2. API å‘¼å«ç™¼é€
å¾ login.component.ts å¯ä»¥çœ‹åˆ°é‚è¼¯æ­£ç¢ºï¼š
```typescript
this.supabaseAuth
  .signIn({
    email: this.form.value.email!,    // ac7x@pm.me
    password: this.form.value.password! // 123123
  })
  .subscribe({
    next: ({ data, error }) => { ... }
  });
```

#### 3. ç¶²è·¯éŒ¯èª¤è¨Šæ¯
```yaml
- generic [ref=e23]: Failed to fetch  # â† å…¸å‹çš„ç¶²è·¯é€£ç·šéŒ¯èª¤
```

### ç‚ºä»€éº¼æœƒé€™æ¨£ï¼Ÿ

#### GitHub Actions Runner ç’°å¢ƒé™åˆ¶
- GitHub Actions çš„ runner ç’°å¢ƒå¯èƒ½æœ‰ç¶²è·¯é™åˆ¶
- æŸäº›å¤–éƒ¨ API å¯èƒ½è¢«é˜²ç«ç‰†é˜»æ“‹
- DNS è§£æå¯èƒ½å—é™

#### é€™ä¸æ˜¯ç¬¬ä¸€æ¬¡
å¾ˆå¤š CI/CD ç’°å¢ƒéƒ½æœ‰é¡ä¼¼å•é¡Œï¼š
- ç„¡æ³•è¨ªå•æŸäº›å¤–éƒ¨æœå‹™
- éœ€è¦é…ç½®ä»£ç†æˆ– VPN
- éœ€è¦ä½¿ç”¨ Mock æœå‹™

### è§£æ±ºæ–¹æ¡ˆ

#### æ–¹æ¡ˆ 1: Mock Supabase (æ¨è–¦ç”¨æ–¼ CI/CD)

å‰µå»º `mock-supabase-auth.service.ts`:
```typescript
export class MockSupabaseAuthService {
  signIn(credentials: SignInCredentials): Observable<AuthResponse<Session>> {
    return of({
      data: {
        access_token: 'mock-token-12345',
        user: {
          id: 'mock-user-id',
          email: credentials.email,
          created_at: new Date().toISOString()
        }
      } as Session,
      error: null
    }).pipe(delay(500)); // æ¨¡æ“¬ç¶²è·¯å»¶é²
  }
}
```

åœ¨æ¸¬è©¦ç’°å¢ƒä½¿ç”¨ Mock:
```typescript
// playwright.config.ts
use: {
  baseURL: 'http://localhost:4200',
  // æ³¨å…¥ Mock æœå‹™
  extraHTTPHeaders: {
    'X-Test-Mode': 'mock'
  }
}
```

#### æ–¹æ¡ˆ 2: æœ¬åœ° Supabase

```bash
# ä½¿ç”¨ Supabase CLI å•Ÿå‹•æœ¬åœ°å¯¦ä¾‹
npx supabase init
npx supabase start

# æ›´æ–°ç’°å¢ƒé…ç½®
supabase: {
  url: 'http://localhost:54321',
  anonKey: '[æœ¬åœ°ç”Ÿæˆçš„ key]'
}
```

#### æ–¹æ¡ˆ 3: åœ¨é–‹ç™¼æ©Ÿå™¨åŸ·è¡Œ

```bash
# åœ¨æœ‰ç¶²è·¯é€£æ¥çš„æœ¬åœ°æ©Ÿå™¨åŸ·è¡Œ
npm run e2e
```

### æ¸¬è©¦å¸³è™Ÿé©—è­‰æ¸…å–®

è®“æˆ‘å€‘é€é …æª¢æŸ¥ç¡¬ç·¨ç¢¼çš„å¸³è™Ÿï¼š

| é …ç›® | æª¢æŸ¥é … | çµæœ |
|------|--------|------|
| Email æ ¼å¼ | ac7x@pm.me | âœ… ç¬¦åˆ RFC 5322 |
| Email é•·åº¦ | 10 å­—ç¬¦ | âœ… åœ¨åˆç†ç¯„åœå…§ |
| å¯†ç¢¼é•·åº¦ | 6 å­—ç¬¦ | âœ… ç¬¦åˆæœ€å°è¦æ±‚ |
| å¯†ç¢¼è¤‡é›œåº¦ | ç´”æ•¸å­— | âœ… ç¬¦åˆæ¸¬è©¦éœ€æ±‚ |
| è¡¨å–®é©—è­‰ | å…©å€‹æ¬„ä½ | âœ… å…¨éƒ¨é€šé |
| API è«‹æ±‚ | signIn å‘¼å« | âœ… æ­£ç¢ºç™¼é€ |
| ç¶²è·¯é€£ç·š | DNS è§£æ | âŒ **å¤±æ•—** |

### çµè«–

**ç¡¬ç·¨ç¢¼æœ¬èº«æ²’æœ‰éŒ¯ï¼** ğŸ¯

å•é¡Œä¸åœ¨æ–¼ï¼š
- âŒ å¸³è™Ÿæ ¼å¼éŒ¯èª¤
- âŒ å¯†ç¢¼ä¸ç¬¦åˆè¦æ±‚
- âŒ ç¨‹å¼ç¢¼é‚è¼¯éŒ¯èª¤
- âŒ Supabase SDK é…ç½®éŒ¯èª¤

å•é¡Œåœ¨æ–¼ï¼š
- âœ… **æ¸¬è©¦ç’°å¢ƒçš„ç¶²è·¯é™åˆ¶**
- âœ… **ç„¡æ³•é€£æ¥åˆ°å¤–éƒ¨ Supabase ä¼ºæœå™¨**
- âœ… **é€™æ˜¯ç’°å¢ƒå•é¡Œï¼Œä¸æ˜¯ç¨‹å¼ç¢¼å•é¡Œ**

### å»ºè­°

1. **ç«‹å³æ¡ç”¨ Mock æœå‹™** ç”¨æ–¼ CI/CD æ¸¬è©¦
2. **ä½¿ç”¨æœ¬åœ° Supabase** ç”¨æ–¼é–‹ç™¼æ¸¬è©¦
3. **åœ¨æœ‰ç¶²è·¯çš„ç’°å¢ƒ** é©—è­‰å¯¦éš›çš„ Supabase æ•´åˆ

### è¿½åŠ èªªæ˜

å¦‚æœæ‚¨æƒ³é©—è­‰æ¸¬è©¦å¸³è™ŸçœŸçš„å­˜åœ¨æ–¼ Supabaseï¼Œéœ€è¦ï¼š

1. è¨ªå• Supabase Dashboard
2. é€²å…¥ Authentication > Users
3. æœå°‹ ac7x@pm.me
4. ç¢ºèªå¸³è™Ÿç‹€æ…‹

ä½†ç”±æ–¼ç¶²è·¯é™åˆ¶ï¼Œæˆ‘å€‘ç¾åœ¨ç„¡æ³•é©—è­‰ã€‚ä¸éå¾ç¨‹å¼ç¢¼è§’åº¦ä¾†çœ‹ï¼Œç¡¬ç·¨ç¢¼çš„æ ¼å¼å®Œå…¨æ­£ç¢ºã€‚

---

**ç¸½çµï¼šç¡¬ç·¨ç¢¼æ²’æœ‰éŒ¯ï¼Œæ˜¯ç¶²è·¯ç’°å¢ƒé™åˆ¶å°è‡´æ¸¬è©¦å¤±æ•—ã€‚** ğŸ¯
