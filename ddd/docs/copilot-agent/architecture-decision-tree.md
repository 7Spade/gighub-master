# ğŸŒ³ æ¶æ§‹æ±ºç­–æ¨¹

> **ç›®æ¨™**: æœ€å¤š 3 å±¤æ±ºç­–ï¼Œå¿«é€Ÿç¢ºå®šç¨‹å¼ç¢¼æ”¾ç½®ä½ç½®

---

## ğŸ“‘ ç›®éŒ„

- [ä¸»æ±ºç­–æµç¨‹](#ä¸»æ±ºç­–æµç¨‹)
- [å±¤ç´šæ±ºç­–](#å±¤ç´šæ±ºç­–)
- [ç›®éŒ„æ±ºç­–](#ç›®éŒ„æ±ºç­–)
- [å…ƒä»¶é¡å‹æ±ºç­–](#å…ƒä»¶é¡å‹æ±ºç­–)
- [ç‹€æ…‹ç®¡ç†æ±ºç­–](#ç‹€æ…‹ç®¡ç†æ±ºç­–)

---

## ä¸»æ±ºç­–æµç¨‹

```mermaid
flowchart TD
    A[é–‹å§‹é–‹ç™¼] --> B{é€™æ˜¯ä»€éº¼é¡å‹ï¼Ÿ}
    
    B -->|æ–°åŠŸèƒ½æ¨¡çµ„| C[åŠŸèƒ½å±¤ç´šåˆ¤æ–·]
    B -->|ä¿®æ”¹ç¾æœ‰åŠŸèƒ½| D[æ‰¾åˆ°ç¾æœ‰ä½ç½®]
    B -->|å…±ç”¨å…ƒä»¶/æœå‹™| E[Shared/Core åˆ¤æ–·]
    B -->|é é¢è·¯ç”±| F[Routes ç›®éŒ„]
    
    C --> C1{æ¶‰åŠå“ªå€‹å±¤ç´šï¼Ÿ}
    C1 -->|å¸³æˆ¶/çµ„ç¹”/èªè­‰| C2[åŸºç¤å±¤]
    C1 -->|è—åœ–/å·¥ä½œå€/æ¬Šé™| C3[å®¹å™¨å±¤]
    C1 -->|æ¥­å‹™åŠŸèƒ½| C4[æ¥­å‹™å±¤]
    
    C2 --> G[src/app/core/]
    C3 --> H[src/app/features/]
    C4 --> H
    
    D --> I[æŸ¥çœ‹ç¾æœ‰ AGENTS.md]
    
    E --> E1{å…¨åŸŸä½¿ç”¨ï¼Ÿ}
    E1 -->|æ˜¯ï¼Œæ ¸å¿ƒæœå‹™| J[src/app/core/]
    E1 -->|æ˜¯ï¼ŒUI å…ƒä»¶| K[src/app/shared/]
    E1 -->|å¦ï¼Œç‰¹å®šåŠŸèƒ½| H
    
    F --> L[src/app/routes/]
```

---

## å±¤ç´šæ±ºç­–

### ä¸‰å±¤æ¶æ§‹åˆ¤æ–·

```mermaid
flowchart TD
    A[æ–°åŠŸèƒ½éœ€æ±‚] --> B{æ¶‰åŠç”¨æˆ¶èº«ä»½/çµ„ç¹”/èªè­‰ï¼Ÿ}
    
    B -->|æ˜¯| C[åŸºç¤å±¤ Foundation]
    B -->|å¦| D{æ¶‰åŠè—åœ–/å·¥ä½œå€/æ¬Šé™ï¼Ÿ}
    
    D -->|æ˜¯| E[å®¹å™¨å±¤ Container]
    D -->|å¦| F[æ¥­å‹™å±¤ Business]
    
    C --> C1["è™•ç†ä½ç½®ï¼š
    - å¸³æˆ¶ â†’ accounts è¡¨
    - çµ„ç¹”æˆå“¡ â†’ organization_members è¡¨
    - åœ˜éšŠ â†’ teams, team_members è¡¨
    - Bot â†’ accounts (type=BOT)"]
    
    E --> E1["è™•ç†ä½ç½®ï¼š
    - è—åœ– â†’ blueprints è¡¨
    - å·¥ä½œå€ â†’ workspaces è¡¨
    - åˆ†æ”¯ â†’ blueprint_branches è¡¨
    - PR â†’ blueprint_pull_requests è¡¨
    - æ¬Šé™ â†’ blueprint_members è¡¨"]
    
    F --> F1["è™•ç†ä½ç½®ï¼š
    - ä»»å‹™ â†’ tasks è¡¨
    - æ—¥èªŒ â†’ diaries è¡¨
    - å“è³ªé©—æ”¶ â†’ checklists è¡¨
    - æª”æ¡ˆ â†’ files è¡¨
    - é€šçŸ¥ â†’ notifications è¡¨"]
```

### å±¤ç´šé€ŸæŸ¥è¡¨

| å•é¡Œ | ç­”æ¡ˆ | å±¤ç´š |
|------|------|------|
| æ¶‰åŠç”¨æˆ¶ç™»å…¥/ç™»å‡ºï¼Ÿ | æ˜¯ | åŸºç¤å±¤ |
| æ¶‰åŠçµ„ç¹”/åœ˜éšŠç®¡ç†ï¼Ÿ | æ˜¯ | åŸºç¤å±¤ |
| æ¶‰åŠè—åœ–å»ºç«‹/ç®¡ç†ï¼Ÿ | æ˜¯ | å®¹å™¨å±¤ |
| æ¶‰åŠå·¥ä½œå€åˆ‡æ›ï¼Ÿ | æ˜¯ | å®¹å™¨å±¤ |
| æ¶‰åŠæ¬Šé™åˆ†é…ï¼Ÿ | æ˜¯ | å®¹å™¨å±¤ |
| æ¶‰åŠä»»å‹™/æ—¥èªŒ/æª”æ¡ˆç­‰æ¥­å‹™ï¼Ÿ | æ˜¯ | æ¥­å‹™å±¤ |

---

## ç›®éŒ„æ±ºç­–

### æ‡‰ç”¨å±¤ç›®éŒ„é¸æ“‡

```mermaid
flowchart TD
    A[ç¨‹å¼ç¢¼æ”¾å“ªè£¡ï¼Ÿ] --> B{æ˜¯ä»€éº¼é¡å‹ï¼Ÿ}
    
    B -->|é é¢è·¯ç”±| C[src/app/routes/]
    B -->|å…±ç”¨ UI å…ƒä»¶| D[src/app/shared/components/]
    B -->|å…±ç”¨æŒ‡ä»¤| E[src/app/shared/directives/]
    B -->|å…±ç”¨ç®¡é“| F[src/app/shared/pipes/]
    B -->|å…¨åŸŸæœå‹™| G[src/app/core/services/]
    B -->|HTTP æ””æˆªå™¨| H[src/app/core/net/]
    B -->|è·¯ç”±å®ˆè¡›| I[src/app/core/guards/]
    B -->|åŠŸèƒ½æ¨¡çµ„| J[src/app/features/]
    B -->|ç‰ˆé¢é…ç½®| K[src/app/layout/]
    
    J --> J1{åŠŸèƒ½é¡å‹ï¼Ÿ}
    J1 -->|ä»»å‹™ç®¡ç†| J2[features/task/]
    J1 -->|æ—¥èªŒç®¡ç†| J3[features/diary/]
    J1 -->|è—åœ–ç®¡ç†| J4[features/blueprint/]
    J1 -->|å…¶ä»–| J5[features/{feature-name}/]
```

### åŠŸèƒ½æ¨¡çµ„å…§éƒ¨çµæ§‹

```mermaid
flowchart TD
    A[åŠŸèƒ½æ¨¡çµ„å…§éƒ¨] --> B{æª”æ¡ˆé¡å‹ï¼Ÿ}
    
    B -->|é ˜åŸŸæ¨¡å‹/ä»‹é¢| C[domain/]
    B -->|è³‡æ–™å­˜å–| D[data-access/]
    B -->|æ™ºèƒ½å…ƒä»¶| E[shell/]
    B -->|å±•ç¤ºå…ƒä»¶| F[ui/]
    B -->|å·¥å…·å‡½æ•¸| G[utils/]
    B -->|å¸¸æ•¸é…ç½®| H[constants/]
    B -->|è·¯ç”±å®šç¾©| I[{feature}.routes.ts]
    
    C --> C1["domain/
    â”œâ”€â”€ models/
    â”œâ”€â”€ interfaces/
    â”œâ”€â”€ types/
    â””â”€â”€ enums/"]
    
    D --> D1["data-access/
    â”œâ”€â”€ stores/
    â”œâ”€â”€ repositories/
    â””â”€â”€ services/"]
    
    E --> E1["shell/
    â”œâ”€â”€ {feature}-shell/
    â””â”€â”€ dialogs/"]
    
    F --> F1["ui/
    â”œâ”€â”€ {feature}-list/
    â”œâ”€â”€ {feature}-card/
    â””â”€â”€ shared/"]
```

### ç›®éŒ„é€ŸæŸ¥è¡¨

| å•é¡Œ | ç­”æ¡ˆ | ä½ç½® |
|------|------|------|
| æ˜¯é é¢è·¯ç”±å—ï¼Ÿ | æ˜¯ | `src/app/routes/` |
| æ˜¯å¤šè™•ä½¿ç”¨çš„ UI å…ƒä»¶ï¼Ÿ | æ˜¯ | `src/app/shared/components/` |
| æ˜¯å…¨åŸŸæœå‹™ï¼Ÿ | æ˜¯ | `src/app/core/services/` |
| æ˜¯å‚ç›´åŠŸèƒ½åˆ‡ç‰‡ï¼Ÿ | æ˜¯ | `src/app/features/` |
| æ˜¯ç‰ˆé¢é…ç½®ï¼Ÿ | æ˜¯ | `src/app/layout/` |

---

## å…ƒä»¶é¡å‹æ±ºç­–

### Shell vs UI æ±ºç­–

```mermaid
flowchart TD
    A[å»ºç«‹æ–°å…ƒä»¶] --> B{éœ€è¦æ³¨å…¥ Store å—ï¼Ÿ}
    
    B -->|æ˜¯| C{æ˜¯åŠŸèƒ½æ¨¡çµ„å…¥å£å—ï¼Ÿ}
    B -->|å¦| D[UI å…ƒä»¶]
    
    C -->|æ˜¯| E[Shell å…ƒä»¶]
    C -->|å¦| F{éœ€è¦è™•ç†æ¥­å‹™é‚è¼¯å—ï¼Ÿ}
    
    F -->|æ˜¯| E
    F -->|å¦| D
    
    E --> E1["ä½ç½®ï¼šshell/
    ç‰¹å¾µï¼š
    - æ³¨å…¥ Store
    - è™•ç†æ¥­å‹™é‚è¼¯
    - ç®¡ç†ç‹€æ…‹
    - æä¾›è³‡æ–™çµ¦å­å…ƒä»¶"]
    
    D --> D1["ä½ç½®ï¼šui/
    ç‰¹å¾µï¼š
    - ä½¿ç”¨ input()/output()
    - ç„¡æ¥­å‹™é‚è¼¯
    - ç´”å±•ç¤ºç”¨é€”
    - é«˜è¤‡ç”¨æ€§"]
```

### å…ƒä»¶é¸æ“‡é€ŸæŸ¥è¡¨

| ç‰¹å¾µ | Shell (Smart) | UI (Presentational) |
|------|---------------|---------------------|
| æ³¨å…¥ Store | âœ… | âŒ |
| æ¥­å‹™é‚è¼¯ | âœ… | âŒ |
| `input()` / `output()` | è¼ƒå°‘ | å¤§é‡ä½¿ç”¨ |
| ç‹€æ…‹ç®¡ç† | ç®¡ç†ç‹€æ…‹ | ç„¡ç‹€æ…‹ |
| è¤‡ç”¨æ€§ | ä½ | é«˜ |
| ä½ç½® | `shell/` | `ui/` |

---

## ç‹€æ…‹ç®¡ç†æ±ºç­–

### ç‹€æ…‹ç®¡ç†é¸æ“‡

```mermaid
flowchart TD
    A[éœ€è¦ç®¡ç†ç‹€æ…‹] --> B{ç‹€æ…‹ç¯„åœï¼Ÿ}
    
    B -->|å…¨åŸŸç‹€æ…‹| C[æä¾›æ–¼ root]
    B -->|åŠŸèƒ½æ¨¡çµ„ç‹€æ…‹| D[æä¾›æ–¼ Shell]
    B -->|å…ƒä»¶æœ¬åœ°ç‹€æ…‹| E[signal()]
    
    C --> C1["@Injectable({ providedIn: 'root' })
    ä½ç½®ï¼šsrc/app/core/services/
    
    ç¯„ä¾‹ï¼š
    - AuthStore
    - UserStore
    - NotificationStore"]
    
    D --> D1["åœ¨ Shell çš„ providers ä¸­
    ä½ç½®ï¼šfeatures/{feature}/data-access/stores/
    
    ç¯„ä¾‹ï¼š
    - BlueprintStore
    - TaskStore
    - DiaryStore"]
    
    E --> E1["ç›´æ¥åœ¨å…ƒä»¶ä¸­
    
    ç¯„ä¾‹ï¼š
    private readonly isOpen = signal(false);
    private readonly count = signal(0);"]
```

### ç‹€æ…‹é‡ç½®æ™‚æ©Ÿ

| è§¸ç™¼æƒ…å¢ƒ | é‡ç½®ç¯„åœ |
|----------|----------|
| ç™»å‡º | æ‰€æœ‰ Store Signal |
| åˆ‡æ›çµ„ç¹” | Blueprint, Task, Diary, Todo Store |
| åˆ‡æ›è—åœ– | Task, Diary, Todo Store |

---

## å¿«é€Ÿæ±ºç­–æµç¨‹åœ–

### å®Œæ•´æ±ºç­–æµç¨‹

```mermaid
flowchart TD
    START[é–‹å§‹] --> Q1{æ˜¯æ–°åŠŸèƒ½é‚„æ˜¯ä¿®æ”¹ï¼Ÿ}
    
    Q1 -->|æ–°åŠŸèƒ½| Q2{æ¶‰åŠå“ªå€‹å±¤ç´šï¼Ÿ}
    Q1 -->|ä¿®æ”¹| FIND[æ‰¾åˆ°ç¾æœ‰æª”æ¡ˆä½ç½®]
    
    Q2 -->|åŸºç¤å±¤| CORE[src/app/core/]
    Q2 -->|å®¹å™¨å±¤| FEATURE[src/app/features/]
    Q2 -->|æ¥­å‹™å±¤| FEATURE
    
    FEATURE --> Q3{éœ€è¦å“ªäº›éƒ¨åˆ†ï¼Ÿ}
    
    Q3 -->|é ˜åŸŸæ¨¡å‹| DOMAIN[domain/]
    Q3 -->|è³‡æ–™å­˜å–| DATA[data-access/]
    Q3 -->|æ™ºèƒ½å…ƒä»¶| SHELL[shell/]
    Q3 -->|å±•ç¤ºå…ƒä»¶| UI[ui/]
    Q3 -->|å·¥å…·å‡½æ•¸| UTIL[utils/]
    
    SHELL --> Q4{éœ€è¦ Store å—ï¼Ÿ}
    Q4 -->|æ˜¯| STORE["providers: [Store]"]
    Q4 -->|å¦| DIRECT[ç›´æ¥ä½¿ç”¨ service]
    
    UI --> Q5{éœ€è¦ç‹€æ…‹å—ï¼Ÿ}
    Q5 -->|æ˜¯| INPUT["ä½¿ç”¨ input()/output()"]
    Q5 -->|å¦| PURE[ç´”å±•ç¤ºå…ƒä»¶]
```

---

## åƒè€ƒè³‡æº

- [AGENTS.md](../../AGENTS.md) - å°ˆæ¡ˆç¸½è¦½
- [Features AGENTS.md](../../src/app/features/AGENTS.md) - å‚ç›´åˆ‡ç‰‡æ¶æ§‹
- [system-architecture.md](../architecture/system-architecture.md) - ç³»çµ±æ¶æ§‹åœ–
- [mindmap.md](../agent/mindmap.md) - AI Agent æ€ç¶­å°åœ–

---

**æœ€å¾Œæ›´æ–°**: 2025-11-27
