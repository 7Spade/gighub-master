# ğŸ“‹ GigHub ä¸‹ä¸€æ­¥é–‹ç™¼æŒ‡å—

> åŸºæ–¼å°ˆæ¡ˆç¾æ³åˆ†æçš„é–‹ç™¼æ–¹å‘å»ºè­°ï¼ˆå·²æ›´æ–°è‡³æœ€æ–°é€²åº¦ï¼‰

**æ›´æ–°æ—¥æœŸ**: 2025-12-04ï¼ˆè—åœ– UI ä¸€è‡´æ€§åˆ†æï¼‰

---

## ğŸ¨ è—åœ– UI ä¸€è‡´æ€§åˆ†æèˆ‡æ”¹é€²æ–¹æ¡ˆï¼ˆ2025-12-04ï¼‰

> åŸºæ–¼ Context7 æŸ¥è©¢ ng-zorro-antd èˆ‡ ng-alain æœ€ä½³å¯¦è¸ï¼Œä»¥åŠå°æ‰€æœ‰è—åœ– Web UI å…ƒä»¶çš„å…¨é¢åˆ†æã€‚

### ç•¶å‰ UI å…ƒä»¶æ¸…å–®

| å…ƒä»¶ | è·¯å¾‘ | ç”¨é€” |
|------|------|------|
| BlueprintListComponent | `routes/blueprint/list/` | è—åœ–åˆ—è¡¨é é¢ |
| CreateBlueprintComponent | `routes/blueprint/create-blueprint/` | å»ºç«‹è—åœ–æ¨¡æ…‹æ¡† |
| BlueprintOverviewComponent | `routes/blueprint/overview/` | è—åœ–æ¦‚è¦½ï¼ˆå« 5 å€‹ Tabï¼‰ |
| TasksComponent | `routes/blueprint/tasks/` | ä»»å‹™ç®¡ç† |
| MembersComponent | `routes/blueprint/members/` | æˆå“¡ç®¡ç† |
| FinancialOverviewComponent | `routes/blueprint/financial/` | è²¡å‹™æ¦‚è¦½ |
| ContractListComponent | `routes/blueprint/financial/` | åˆç´„ç®¡ç† |
| ExpenseListComponent | `routes/blueprint/financial/` | è²»ç”¨ç®¡ç† |
| PaymentRequestListComponent | `routes/blueprint/financial/` | è«‹æ¬¾ç®¡ç† |
| PaymentListComponent | `routes/blueprint/financial/` | ä»˜æ¬¾ç´€éŒ„ |

### âŒ ç™¼ç¾çš„ UI ä¸ä¸€è‡´æ€§å•é¡Œ

#### 1. é é¢æ¨™é ­çµæ§‹ä¸ä¸€è‡´

| å…ƒä»¶ | æ¨™é ­çµæ§‹ | å•é¡Œ |
|------|---------|------|
| BlueprintOverviewComponent | è‡ªè¨‚ `.blueprint-header` | âœ… å®Œæ•´ï¼ˆAvatar + åç¨± + Tags + æ“ä½œæŒ‰éˆ•ï¼‰ |
| FinancialOverviewComponent | è‡ªè¨‚ `.header` | âš ï¸ ç¼ºå°‘ Avatarï¼Œèˆ‡æ¦‚è¦½ä¸ä¸€è‡´ |
| ContractListComponent | è‡ªè¨‚ `.header` | âš ï¸ ç¼ºå°‘å‰¯æ¨™é¡Œæ¨£å¼ï¼Œè¿”å›æŒ‰éˆ•æ¨£å¼ä¸åŒ |
| ExpenseListComponent | è‡ªè¨‚ `.header` | âš ï¸ åŒä¸Š |
| TasksComponent | ç„¡ç¨ç«‹æ¨™é ­ | âš ï¸ ä¾è³´æ¦‚è¦½é  Tab æ¨™é ­ |

**å»ºè­°è§£æ±ºæ–¹æ¡ˆ**ï¼š
```html
<!-- çµ±ä¸€é é¢æ¨™é ­å…ƒä»¶ -->
<app-page-header
  [title]="'åˆç´„ç®¡ç†'"
  [subtitle]="'Contract Management - ç®¡ç†å°ˆæ¡ˆåˆç´„èˆ‡é ç®—'"
  [backUrl]="['/blueprint', id(), 'financial', 'overview']"
  [actions]="headerActions"
></app-page-header>
```

#### 2. çµ±è¨ˆå¡ç‰‡æ¨£å¼ä¸ä¸€è‡´

| å…ƒä»¶ | çµ±è¨ˆå¡ç‰‡æ•¸é‡ | ä½ˆå±€ | æ¨£å¼é¡ |
|------|-------------|------|--------|
| BlueprintOverviewComponent | 4 | `nzSpan="6"` | `.stats-row` |
| FinancialOverviewComponent | 4 | `nzSpan="6"` (éŸ¿æ‡‰å¼) | `.summary-section` |
| ContractListComponent | 4 | `nzSpan="6"` | `.stats-section` |
| ExpenseListComponent | 4 | `nzSpan="6"` | `.stats-section` |

**å•é¡Œ**ï¼š
- ä¸åŒçš„éŸ¿æ‡‰å¼æ–·é»è™•ç†ï¼ˆæœ‰äº›ç”¨ `nzXs/nzSm/nzMd`ï¼Œæœ‰äº›æ²’æœ‰ï¼‰
- çµ±è¨ˆå¡ç‰‡æ¨£å¼é¡åä¸çµ±ä¸€ï¼ˆ`stat-card` vs ç„¡æ¨£å¼ï¼‰
- å¡ç‰‡å…§å°é½Šæ–¹å¼ä¸ä¸€è‡´

**å»ºè­°è§£æ±ºæ–¹æ¡ˆ**ï¼š
```scss
// çµ±ä¸€çµ±è¨ˆå¡ç‰‡æ¨£å¼ (shared/styles/_stat-cards.scss)
.stat-card {
  text-align: center;
  
  .ant-statistic-title {
    font-size: 14px;
    color: #666;
  }
  
  .ant-statistic-content-value {
    font-size: 24px;
    font-weight: 600;
  }
}

// çµ±ä¸€éŸ¿æ‡‰å¼ä½ˆå±€
.stats-row {
  margin-bottom: 24px;
  
  > [nz-col] {
    margin-bottom: 16px;
  }
}
```

#### 3. è¡¨æ ¼/åˆ—è¡¨ç¯©é¸å™¨çµæ§‹ä¸ä¸€è‡´

| å…ƒä»¶ | ç¯©é¸å™¨ä½ç½® | ç¯©é¸å™¨é¡å‹ |
|------|-----------|-----------|
| ContractListComponent | ç¨ç«‹ nz-card | æœå°‹ + ä¸‹æ‹‰ + æ¸…é™¤æŒ‰éˆ• |
| ExpenseListComponent | ç¨ç«‹ nz-card | æœå°‹ + ä¸‹æ‹‰ + æ—¥æœŸç¯„åœ + æ¸…é™¤æŒ‰éˆ• |
| BlueprintOverviewComponent æˆå“¡è¡¨ | ç„¡ç¯©é¸å™¨ | - |

**å•é¡Œ**ï¼š
- ç¯©é¸å™¨å¡ç‰‡çš„é–“è·ä¸ä¸€è‡´ï¼ˆæœ‰äº› `margin-bottom: 16px`ï¼‰
- æ¸…é™¤æŒ‰éˆ•çš„æ¨£å¼ä¸ä¸€è‡´

**å»ºè­°è§£æ±ºæ–¹æ¡ˆ**ï¼š
```html
<!-- çµ±ä¸€ç¯©é¸å™¨çµæ§‹ -->
<nz-card [nzBordered]="false" class="filter-card">
  <div nz-row [nzGutter]="[16, 16]" nzAlign="middle">
    <!-- æœå°‹æ¡† -->
    <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="8">...</div>
    <!-- ç¯©é¸ä¸‹æ‹‰ -->
    <div nz-col [nzXs]="12" [nzSm]="6" [nzMd]="4">...</div>
    <!-- æ¸…é™¤æŒ‰éˆ• -->
    <div nz-col>
      <button nz-button nzType="text">
        <span nz-icon nzType="clear"></span>
        æ¸…é™¤ç¯©é¸
      </button>
    </div>
  </div>
</nz-card>
```

#### 4. æŠ½å±œ (Drawer) è¡¨å–®çµæ§‹ä¸ä¸€è‡´

| å…ƒä»¶ | æŠ½å±œå¯¬åº¦ | è¡¨å–®ä½ˆå±€ | Footer æ¨£å¼ |
|------|---------|---------|-------------|
| ContractListComponent | 520px | `nzLayout="vertical"` | `.drawer-footer` |
| ExpenseListComponent | 520px | `nzLayout="vertical"` | `.drawer-footer` |
| TaskEditDrawerComponent | ? | ? | ? |

**å•é¡Œ**ï¼š
- æŠ½å±œ Footer æŒ‰éˆ•é–“è·æ¨£å¼é‡è¤‡å®šç¾©
- æ²’æœ‰çµ±ä¸€çš„æŠ½å±œå¯¬åº¦è¦ç¯„

**å»ºè­°è§£æ±ºæ–¹æ¡ˆ**ï¼š
```scss
// çµ±ä¸€æŠ½å±œæ¨£å¼ (shared/styles/_drawer.scss)
.drawer-footer {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  margin-top: 24px;
  padding-top: 24px;
  border-top: 1px solid #f0f0f0;
}

// æŠ½å±œå¯¬åº¦è¦ç¯„
$drawer-width-sm: 400px;   // ç°¡å–®è¡¨å–®
$drawer-width-md: 520px;   // æ¨™æº–è¡¨å–®
$drawer-width-lg: 720px;   // è¤‡é›œè¡¨å–®/è©³æƒ…
```

#### 5. ç©ºç‹€æ…‹ (Empty State) è™•ç†ä¸ä¸€è‡´

| å…ƒä»¶ | ç©ºç‹€æ…‹é¡å‹ | æœ‰ç„¡æ“ä½œæŒ‰éˆ• |
|------|-----------|-------------|
| BlueprintOverviewComponent ä»»å‹™ Tab | nz-empty + è‡ªè¨‚ Footer | âœ… æœ‰ |
| BlueprintOverviewComponent æ´»å‹• Tab | nz-empty + è‡ªè¨‚ Footer | âœ… æœ‰ï¼ˆèªªæ˜æ–‡å­—ï¼‰ |
| ContractListComponent è¡¨æ ¼ | ST å…§å»ºç©ºç‹€æ…‹ | âŒ ç„¡ |

**å»ºè­°è§£æ±ºæ–¹æ¡ˆ**ï¼š
```html
<!-- çµ±ä¸€ç©ºç‹€æ…‹å…ƒä»¶ -->
<nz-empty
  [nzNotFoundImage]="'simple'"
  [nzNotFoundContent]="'å°šç„¡è³‡æ–™'"
>
  <ng-template #nzNotFoundFooter>
    <p class="text-muted">{{ description }}</p>
    <button nz-button nzType="primary" (click)="onCreate()">
      <span nz-icon nzType="plus"></span>
      {{ createButtonText }}
    </button>
  </ng-template>
</nz-empty>
```

#### 6. å°èˆªå¡ç‰‡æ¨£å¼ä¸ä¸€è‡´

| å…ƒä»¶ | å°èˆªå¡ç‰‡ä½ç½® | æ¨£å¼ |
|------|-------------|------|
| BlueprintOverviewComponent æ¦‚è¦½ Tab | `.quick-nav-row` + `.nav-card` | Icon + æ–‡å­— + Hover æ•ˆæœ |
| FinancialOverviewComponent | `.navigation-section` + `.nav-card` | Icon + æ–‡å­— + æ•¸é‡ + ç®­é ­ |

**å•é¡Œ**ï¼š
- å…©è™•å°èˆªå¡ç‰‡çµæ§‹ä¸åŒï¼ˆä¸€å€‹æœ‰ç®­é ­ï¼Œä¸€å€‹æ²’æœ‰ï¼‰
- Icon æ¨£å¼è™•ç†æ–¹å¼ä¸åŒï¼ˆé¡è‰² vs èƒŒæ™¯è‰²ï¼‰

**å»ºè­°è§£æ±ºæ–¹æ¡ˆ**ï¼š
```html
<!-- çµ±ä¸€å°èˆªå¡ç‰‡å…ƒä»¶ -->
<app-nav-card
  [icon]="'file-text'"
  [iconColor]="'#1890ff'"
  [title]="'åˆç´„ç®¡ç†'"
  [description]="'ç®¡ç†å°ˆæ¡ˆåˆç´„èˆ‡é ç®—'"
  [count]="contractCount"
  [showArrow]="true"
  (click)="navigateTo('contracts')"
></app-nav-card>
```

#### 7. é¡è‰²ä½¿ç”¨ä¸ä¸€è‡´

| èªæ„ | ä½¿ç”¨çš„é¡è‰² | å•é¡Œ |
|------|-----------|------|
| ä¸»è¦/è—è‰² | `#1890ff` | âœ… çµ±ä¸€ |
| æˆåŠŸ/ç¶ è‰² | `#52c41a` | âœ… çµ±ä¸€ |
| è­¦å‘Š/æ©™è‰² | `#faad14`, `#fa8c16` | âš ï¸ å…©å€‹æ©™è‰²æ··ç”¨ |
| ç´«è‰² | `#722ed1` | âœ… çµ±ä¸€ |
| éŒ¯èª¤/ç´…è‰² | `#ff4d4f` | âœ… çµ±ä¸€ |

**å»ºè­°è§£æ±ºæ–¹æ¡ˆ**ï¼š
```scss
// çµ±ä¸€é¡è‰²è®Šæ•¸ (shared/styles/_colors.scss)
$color-primary: #1890ff;
$color-success: #52c41a;
$color-warning: #faad14;  // çµ±ä¸€ä½¿ç”¨æ­¤æ©™è‰²
$color-purple: #722ed1;
$color-error: #ff4d4f;
$color-text-secondary: #666;
$color-text-muted: #999;
```

### âœ… UI ä¸€è‡´æ€§æ”¹é€²è¨ˆç•«

#### Phase 1: å»ºç«‹å…±ç”¨æ¨£å¼åº«ï¼ˆ1-2 å¤©ï¼‰

1. **å»ºç«‹å…±ç”¨æ¨£å¼æª”æ¡ˆ**
   ```
   src/app/shared/styles/
   â”œâ”€â”€ _variables.scss      # é¡è‰²ã€é–“è·ã€å­—é«”è®Šæ•¸
   â”œâ”€â”€ _stat-cards.scss     # çµ±è¨ˆå¡ç‰‡æ¨£å¼
   â”œâ”€â”€ _page-header.scss    # é é¢æ¨™é ­æ¨£å¼
   â”œâ”€â”€ _filter-card.scss    # ç¯©é¸å™¨å¡ç‰‡æ¨£å¼
   â”œâ”€â”€ _drawer.scss         # æŠ½å±œè¡¨å–®æ¨£å¼
   â”œâ”€â”€ _nav-card.scss       # å°èˆªå¡ç‰‡æ¨£å¼
   â””â”€â”€ _empty-state.scss    # ç©ºç‹€æ…‹æ¨£å¼
   ```

2. **å®šç¾©è¨­è¨ˆè¦ç¯„**
   - é é¢æ¨™é ­é«˜åº¦ï¼š80pxï¼ˆå« paddingï¼‰
   - çµ±è¨ˆå¡ç‰‡é«˜åº¦ï¼šå›ºå®š 100px
   - å¡ç‰‡é–“è·ï¼š16pxï¼ˆgutterï¼‰
   - æŠ½å±œå¯¬åº¦ï¼š520pxï¼ˆæ¨™æº–ï¼‰ã€720pxï¼ˆè©³æƒ…ï¼‰

#### Phase 2: å»ºç«‹å…±ç”¨å…ƒä»¶ï¼ˆ2-3 å¤©ï¼‰

1. **PageHeaderComponent**
   - çµ±ä¸€çš„é é¢æ¨™é ­ï¼Œå«è¿”å›æŒ‰éˆ•ã€æ¨™é¡Œã€å‰¯æ¨™é¡Œã€æ“ä½œå€
   
2. **StatCardComponent**
   - çµ±ä¸€çš„çµ±è¨ˆå¡ç‰‡ï¼Œå«åœ–ç¤ºã€æ¨™é¡Œã€æ•¸å€¼ã€å¯é¸é€²åº¦æ¢

3. **NavCardComponent**
   - çµ±ä¸€çš„å°èˆªå¡ç‰‡ï¼Œå«åœ–ç¤ºã€æ¨™é¡Œã€æè¿°ã€è¨ˆæ•¸ã€ç®­é ­

4. **FilterCardComponent**
   - çµ±ä¸€çš„ç¯©é¸å™¨å®¹å™¨

5. **EmptyStateComponent**
   - çµ±ä¸€çš„ç©ºç‹€æ…‹è™•ç†

#### Phase 3: é‡æ§‹ç¾æœ‰å…ƒä»¶ï¼ˆ3-5 å¤©ï¼‰

1. é€æ­¥å°‡ç¾æœ‰å…ƒä»¶æ”¹ç”¨å…±ç”¨å…ƒä»¶/æ¨£å¼
2. ç¢ºä¿éŸ¿æ‡‰å¼ä½ˆå±€ä¸€è‡´
3. çµ±ä¸€é¡è‰²å’Œé–“è·ä½¿ç”¨

### ğŸ“Š UI ä¸€è‡´æ€§è©•åˆ†

| ç¶­åº¦ | ç•¶å‰è©•åˆ† | ç›®æ¨™è©•åˆ† | èªªæ˜ |
|------|---------|---------|------|
| é é¢æ¨™é ­ | 60% | 95% | éœ€çµ±ä¸€çµæ§‹å’Œæ¨£å¼ |
| çµ±è¨ˆå¡ç‰‡ | 70% | 95% | éœ€çµ±ä¸€éŸ¿æ‡‰å¼å’Œæ¨£å¼é¡ |
| è¡¨æ ¼ç¯©é¸å™¨ | 65% | 90% | éœ€çµ±ä¸€çµæ§‹å’Œé–“è· |
| æŠ½å±œè¡¨å–® | 80% | 95% | éœ€æŠ½å–å…±ç”¨æ¨£å¼ |
| ç©ºç‹€æ…‹ | 60% | 90% | éœ€çµ±ä¸€è™•ç†æ–¹å¼ |
| å°èˆªå¡ç‰‡ | 50% | 95% | éœ€å»ºç«‹å…±ç”¨å…ƒä»¶ |
| é¡è‰²ä½¿ç”¨ | 85% | 100% | éœ€çµ±ä¸€æ©™è‰²è®Šæ•¸ |
| **æ•´é«”ä¸€è‡´æ€§** | **67%** | **95%** | - |

---

## âœ… è—åœ–å…§éƒ¨åŠŸèƒ½ç¾æ³åˆ†æï¼ˆ2025-12-04 å·²å®Œæˆæ•´åˆï¼‰

### è—åœ–åˆ—è¡¨ (Blueprint List)
- âœ… è—åœ–å¡ç‰‡åˆ—è¡¨é¡¯ç¤º - æ­£å¸¸é¡¯ç¤º
- âœ… å»ºç«‹è—åœ–åŠŸèƒ½ - æ¨¡æ…‹æ¡†å¯ç”¨
- âœ… é€²å…¥è—åœ–è©³æƒ… - é»æ“Šå¡ç‰‡å¯é€²å…¥

### è—åœ–è©³æƒ…é é¢ (Blueprint Detail) - âœ… å·²å®Œæˆ UI æ•´åˆ

#### ç•¶å‰é é¢çµæ§‹ï¼ˆå·²æ›´æ–°ï¼‰
```
/blueprint/:id/overview    â† æ¦‚è¦½é é¢ï¼ˆTabs: æ¦‚è¦½, ä»»å‹™ç®¡ç†, æˆå“¡ç®¡ç†, è²¡å‹™, æ´»å‹•ï¼‰
/blueprint/:id/tasks       â† ä»»å‹™ç®¡ç†ï¼ˆå®Œæ•´è¦–åœ–ï¼šæ¨¹ç‹€/è¡¨æ ¼/çœ‹æ¿ï¼‰
/blueprint/:id/members     â† æˆå“¡ç®¡ç†ï¼ˆå®Œæ•´è¦–åœ–ï¼‰
/blueprint/:id/financial/* â† è²¡å‹™æ¨¡çµ„ï¼ˆç¨ç«‹å­è·¯ç”±ï¼‰
```

#### âœ… å·²å®Œæˆçš„æ•´åˆ

| åŠŸèƒ½å€å¡Š | ç¾æ³ | å®Œæˆå…§å®¹ |
|---------|------|---------|
| **æ¦‚è¦½ (Overview Tab)** | âœ… 100% | åŸºæœ¬è³‡è¨Š + å¿«æ·å°èˆªå¡ç‰‡ + çµ±ä¸€æ¨™é ­ï¼ˆé‡æ–°æ•´ç†æŒ‰éˆ•ï¼‰ |
| **ä»»å‹™ç®¡ç† Tab** | âœ… 100% | çµ±ä¸€æ¨™é ­ï¼ˆé–‹å•Ÿå®Œæ•´è¦–åœ–æŒ‰éˆ•ï¼‰ |
| **æˆå“¡ç®¡ç† Tab** | âœ… 100% | æˆå“¡é è¦½è¡¨æ ¼ + çµ±ä¸€æ¨™é ­ï¼ˆé–‹å•Ÿå®Œæ•´è¦–åœ–æŒ‰éˆ•ï¼‰ |
| **è²¡å‹™ Tab** | âœ… 100% | è²¡å‹™çµ±è¨ˆå¡ç‰‡ï¼ˆç¸½é ç®—/å·²æ”¯å‡º/å·²ä»˜æ¬¾/å‰©é¤˜é ç®—ï¼‰+ çµ±ä¸€æ¨™é ­ + æ“ä½œæŒ‰éˆ•ç¾¤çµ„ |
| **æ´»å‹• Tab** | ğŸ”¶ å¾…å¯¦ä½œ | çµ±ä¸€æ¨™é ­ï¼ˆé–‹å•Ÿå®Œæ•´è¦–åœ–æŒ‰éˆ•-disabledï¼‰+ å¾…å¯©è¨ˆæ—¥èªŒ |

#### âœ… UI çµ±ä¸€æ¨™æº–ï¼ˆ2025-12-04 å®Œæˆï¼‰
- æ‰€æœ‰ Tab éƒ½æœ‰çµ±ä¸€çš„ `.tab-header` çµæ§‹ï¼ˆæ¨™é¡Œ + æ“ä½œæŒ‰éˆ•ï¼‰
- Header å³ä¸Šè§’å·²ç§»é™¤å¤šé¤˜çš„ã€Œä»»å‹™ç®¡ç†ã€ã€Œæˆå“¡ç®¡ç†ã€æŒ‰éˆ•
- æ¯å€‹ Tab éƒ½æä¾›ã€Œé–‹å•Ÿå®Œæ•´è¦–åœ–ã€å…¥å£
- **è²¡å‹™çµ±è¨ˆå¡ç‰‡å·²é·ç§»è‡³è²¡å‹™ Tab**ï¼ˆç¸½é ç®—ã€å·²æ”¯å‡ºã€å·²ä»˜æ¬¾ã€å‰©é¤˜é ç®—ï¼‰ï¼Œä»¥ä¾¿æ¬Šé™ç®¡ç†

#### è²¡å‹™æ¨¡çµ„å­é é¢
```
/blueprint/:id/financial/overview          âœ… è²¡å‹™æ¦‚è¦½ - å®Œæˆï¼ˆæœ‰çµ±è¨ˆå¡ç‰‡ã€å°èˆªå…¥å£ï¼‰
/blueprint/:id/financial/contracts         âœ… åˆç´„ç®¡ç† - å®Œæˆï¼ˆå®Œæ•´ CRUD + æœå°‹ç¯©é¸ï¼‰
/blueprint/:id/financial/expenses          âœ… è²»ç”¨ç®¡ç† - å®Œæˆï¼ˆå®Œæ•´ CRUD + æœå°‹ç¯©é¸ï¼‰
/blueprint/:id/financial/payment-requests  âœ… è«‹æ¬¾ç®¡ç† - å®Œæˆï¼ˆå®Œæ•´ CRUD + ç‹€æ…‹æµè½‰ï¼‰
/blueprint/:id/financial/payments          âœ… ä»˜æ¬¾ç´€éŒ„ - å®Œæˆï¼ˆå®Œæ•´ CRUDï¼‰
```

#### âœ… èœå–®é…ç½®å·²ä¿®æ­£

`app-data.json` ä¸­çš„è—åœ–èœå–®é…ç½®å·²æ›´æ–°ç‚ºå¯¦éš›å¯ç”¨è·¯ç”±ï¼š

| èœå–®é …ç›® | è·¯ç”± | ç‹€æ…‹ |
|---------|------|------|
| è—åœ–æ¦‚è¦½ | `/blueprint/{blueprintId}/overview` | âœ… æ­£ç¢º |
| ä»»å‹™ç®¡ç† | `/blueprint/{blueprintId}/tasks` | âœ… æ­£ç¢º |
| æˆå“¡ç®¡ç† | `/blueprint/{blueprintId}/members` | âœ… æ­£ç¢º |
| è²¡å‹™ç®¡ç† | `/blueprint/{blueprintId}/financial/overview` | âœ… æ­£ç¢º |

### ğŸ”´ å¾…å¯¦ä½œçš„åŸºç¤åŠŸèƒ½

1. **æ´»å‹•æ™‚é–“è»¸ (Activity)** - æ“ä½œè¨˜éŒ„ã€è®Šæ›´æ­·å²ï¼ˆéœ€ AuditLogï¼‰
2. **è—åœ–è¨­å®š (Settings)** - è—åœ–é…ç½®ã€æ¨¡çµ„å•Ÿç”¨/åœç”¨
3. **æ—¥èªŒæ¨¡çµ„ (Diary)** - æ–½å·¥æ—¥èªŒ
4. **å•é¡Œè¿½è¹¤ (Issues)** - å•é¡Œç™»è¨˜èˆ‡è¿½è¹¤
5. **æª”æ¡ˆç®¡ç† (Files)** - è—åœ–æª”æ¡ˆåˆ—è¡¨

---

## ğŸ“Š å°ˆæ¡ˆç¾æ³ç¸½è¦½

### åŠŸèƒ½å®Œæˆåº¦æ¦‚è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®Œæˆåº¦è©•ä¼°                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åŸºç¤å±¤ (Foundation Layer)                                       â”‚
â”‚   âœ… èªè­‰ç³»çµ± (Supabase Auth)                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   âœ… ä½¿ç”¨è€…ç®¡ç†                               â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   âœ… çµ„ç¹”ç®¡ç†                                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   ğŸ”¶ Bot ç®¡ç†                                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 50%  â”‚
â”‚   âœ… ä¸Šä¸‹æ–‡æ³¨å…¥ç³»çµ± (WorkspaceContext)        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 90%  â”‚
â”‚   âœ… è³‡æ–™éš”é›¢ç³»çµ± (RLS)                       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 85%  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®¹å™¨å±¤ - éª¨æ¶ç´šåˆ¥åŸºç¤è¨­æ–½ (Container Layer - Infrastructure)    â”‚
â”‚   âœ… è—åœ–ç³»çµ± âœ¨ UIæ•´åˆå®Œæˆ                    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85%  â”‚
â”‚   â”‚   â”œâ”€ è—åœ–åˆ—è¡¨/å»ºç«‹                       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ è—åœ–æ¦‚è¦½ (Tab æ•´åˆ)                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ ä»»å‹™ç®¡ç† Tab                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ æˆå“¡ç®¡ç† Tab                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ è²¡å‹™ç®¡ç† Tab (å«æ“ä½œæŒ‰éˆ•)           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ æ´»å‹•æ™‚é–“è»¸ Tab                      ğŸ”¶ å¾…å¯©è¨ˆæ—¥èªŒ  â”‚
â”‚   â”‚   â””â”€ èœå–®/å°èˆªé…ç½®                       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   âœ… è—åœ–æˆå“¡ç®¡ç†                             â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   âœ… æ¬Šé™æ§åˆ¶ (RBAC)                          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ PermissionService                   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ PermissionGuard                     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â””â”€ PermissionDirective                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   âœ… äº‹ä»¶ç¸½ç·š (Event Bus) âœ¨ æ–°å®Œæˆ            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ EventBusService                     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ äº‹ä»¶ç™¼å¸ƒ/è¨‚é–±æ©Ÿåˆ¶ (RxJS Subject)    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ äº‹ä»¶é¡å‹å®šç¾©ç³»çµ±                    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ äº‹ä»¶éæ¿¾å’Œè·¯ç”±                      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â””â”€ äº‹ä»¶å·¥å»  (Event Factory)            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   âœ… æª”æ¡ˆç®¡ç†åŸºç¤ (File Infrastructure) âœ¨ æ–°å®Œæˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ FileRepository                      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ FileService                         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ File Types å®šç¾©                     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ æª”æ¡ˆä¸Šå‚³å…ƒä»¶                        ğŸ”¶ å¾…æ•´åˆ     â”‚
â”‚   â”‚   â””â”€ Supabase Storage é…ç½®               ğŸ”¶ å¾…é…ç½®     â”‚
â”‚   âœ… é€šçŸ¥ä¸­å¿ƒ (Notification Hub) âœ¨ æ–°å®Œæˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ NotificationRepository              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ NotificationService                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ å³æ™‚é€šçŸ¥æ¨é€ (Supabase Realtime)    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ é€šçŸ¥ UI å…ƒä»¶ (HeaderNotifyComponent)â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â””â”€ é€šçŸ¥åˆ†é¡ç³»çµ±                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   ğŸ”´ æ“ä½œå¯©è¨ˆæ—¥èªŒ (Audit Log) â­â­â­â­          â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â”œâ”€ AuditLogRepository                  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â”œâ”€ è³‡æ–™åº«è§¸ç™¼å™¨                        â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â””â”€ å¯©è¨ˆæ—¥èªŒæŸ¥è©¢ä»‹é¢                    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   ğŸ”´ æ™‚é–“è»¸æœå‹™ (Timeline Service)            â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   âœ… æœå°‹å¼•æ“ (Search Engine)                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ SearchRepository                    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ SearchService                       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ å…¨æ–‡æª¢ç´¢                            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ æ¬Šé™æ„ŸçŸ¥éæ¿¾                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â””â”€ å³æ™‚ç´¢å¼•æ›´æ–°                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 70%  â”‚
â”‚   ğŸ”´ é…ç½®ä¸­å¿ƒ (Configuration Center)          â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   ğŸ”¶ é—œè¯ç®¡ç†ç³»çµ± (Relation Manager)          â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 30%  â”‚
â”‚   ğŸ”¶ ç”Ÿå‘½é€±æœŸç®¡ç† (Lifecycle Management)      â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40%  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¥­å‹™å±¤ (Business Layer)                                         â”‚
â”‚   ğŸ”¶ ä»»å‹™ç®¡ç† (Task Module)                   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85%  â”‚
â”‚   â”‚   â”œâ”€ TaskRepository                      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ TaskService                         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ TasksComponent                      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ TaskEditDrawerComponent             â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ æ¨¹ç‹€/è¡¨æ ¼/çœ‹æ¿è¦–åœ–                  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ ä»»å‹™è©•è«–ç³»çµ±                        â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â”œâ”€ ä»»å‹™é™„ä»¶ç®¡ç†                        â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â”œâ”€ ä»»å‹™æ­·å²è¨˜éŒ„                        â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â””â”€ æ™‚é–“è¿½è¹¤                            â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   ğŸ”¶ è²¡å‹™ç®¡ç† (Financial Module)              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 75%  â”‚
â”‚   â”‚   â”œâ”€ FinancialRepository                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ FinancialService                    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ è²¡å‹™æ¦‚è¦½é é¢                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ åˆç´„ç®¡ç† (å®Œæ•´ CRUD)                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ è²»ç”¨ç®¡ç† (å®Œæ•´ CRUD)                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ è«‹æ¬¾ç®¡ç† (å®Œæ•´ CRUD)                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ ä»˜æ¬¾ç´€éŒ„ (å®Œæ•´ CRUD)                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â””â”€ æ¦‚è¦½é è²¡å‹™å…¥å£æŒ‰éˆ•                  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   ğŸ”¶ æ—¥èªŒç®¡ç† (Diary Module)                  â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 15%  â”‚
â”‚   â”‚   â”œâ”€ è³‡æ–™è¡¨è¨­è¨ˆ                          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å®Œæˆ â”‚
â”‚   â”‚   â”œâ”€ DiaryRepository                     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â”œâ”€ DiaryService                        â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â””â”€ UI å…ƒä»¶                             â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   ğŸ”¶ å¾…è¾¦äº‹é … (Todo Module)                   â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 35%  â”‚
â”‚   ğŸ”´ å•é¡Œè¿½è¹¤ (Issue Module)                  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â”œâ”€ IssueRepository                     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â”œâ”€ IssueService                        â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   â”‚   â””â”€ UI å…ƒä»¶                             â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â”‚   ğŸ”´ å“è³ªé©—æ”¶ (Acceptance)                    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœ–ä¾‹ï¼š
  âœ… å®Œæˆ (100%)    ğŸ”¶ é€²è¡Œä¸­ (1-99%)    ğŸ”´ æœªé–‹å§‹ (0%)
  âœ¨ æ–°å®Œæˆ = æœ€è¿‘å®Œæˆçš„é‡å¤§åŠŸèƒ½
  â­â­â­â­ = éª¨æ¶ç´šåˆ¥é«˜å„ªå…ˆç´š
```

### âœ… å·²å®Œæˆï¼šè—åœ–å…§éƒ¨åŠŸèƒ½æ•´åˆï¼ˆ2025-12-04ï¼‰

ä»¥ä¸‹é …ç›®å·²æ–¼ 2025-12-04 å®Œæˆï¼š

#### âœ… ç¬¬ä¸€å„ªå…ˆï¼šæ¦‚è¦½é é¢å°èˆªæ•´åˆ

å·²å°‡ä»»å‹™ç®¡ç†ã€æˆå“¡ç®¡ç†æ•´åˆåˆ°æ¦‚è¦½é é¢çš„ Tab å°èˆªä¸­ï¼Œä¸¦å¢åŠ è²¡å‹™æ¨¡çµ„å…¥å£æŒ‰éˆ•ï¼š

```typescript
// å·²å¯¦ä½œçš„ Tab çµæ§‹
<nz-tabset [(nzSelectedIndex)]="selectedTabIndex">
  <nz-tab nzTitle="æ¦‚è¦½">...</nz-tab>        // âœ… å¿«æ·å°èˆªå¡ç‰‡
  <nz-tab nzTitle="ä»»å‹™ç®¡ç†">...</nz-tab>     // âœ… ä»»å‹™é è¦½ + å®Œæ•´è¦–åœ–å…¥å£
  <nz-tab nzTitle="æˆå“¡ç®¡ç†">...</nz-tab>     // âœ… æˆå“¡é è¦½ + å®Œæ•´è¦–åœ–å…¥å£  
  <nz-tab nzTitle="è²¡å‹™">...</nz-tab>         // âœ… æ“ä½œæŒ‰éˆ• + è²¡å‹™æ¦‚è¦½
  <nz-tab nzTitle="æ´»å‹•">...</nz-tab>         // ğŸ”¶ å¾…å¯¦ä½œå¯©è¨ˆæ—¥èªŒ
</nz-tabset>
```

#### âœ… ç¬¬äºŒå„ªå…ˆï¼šèœå–®é…ç½®ä¿®æ­£

å·²æ›´æ–° `src/assets/tmp/app-data.json` ä¸­çš„è—åœ–èœå–®é…ç½®ï¼š

| ä¿®æ”¹å‰ | ä¿®æ”¹å¾Œ | ç‹€æ…‹ |
|-------|-------|------|
| `/blueprint/{blueprintId}/dashboard` | ç§»é™¤ | âœ… |
| `/blueprint/{blueprintId}/editor` | ç§»é™¤ | âœ… |
| `/blueprint/{blueprintId}/versions` | ç§»é™¤ | âœ… |
| `/blueprint/{blueprintId}/collaborators` | `/blueprint/{blueprintId}/members` | âœ… |
| `/blueprint/{blueprintId}/settings` | ç§»é™¤ï¼ˆå¾…å»ºç«‹ï¼‰ | âœ… |
| æ–°å¢ `ä»»å‹™ç®¡ç†` | `/blueprint/{blueprintId}/tasks` | âœ… |
| æ–°å¢ `è²¡å‹™ç®¡ç†` | `/blueprint/{blueprintId}/financial/overview` | âœ… |

### ğŸ”´ å¾…å¯¦ä½œé …ç›®

#### ç¬¬ä¸‰å„ªå…ˆï¼šæ´»å‹•æ™‚é–“è»¸ (3-5 å¤©)

1. å»ºç«‹ `AuditLogRepository` å’Œ `AuditLogService`
2. åœ¨æ¦‚è¦½é é¢çš„ã€Œæ´»å‹•ã€Tab ä¸­é¡¯ç¤ºæ“ä½œæ­·å²
3. æ•´åˆ EventBusService è‡ªå‹•è¨˜éŒ„è®Šæ›´

#### ç¬¬å››å„ªå…ˆï¼šè—åœ–è¨­å®šé é¢ (2-3 å¤©)

1. å»ºç«‹ `/blueprint/:id/settings` è·¯ç”±
2. å¯¦ä½œè—åœ–ç·¨è¼¯è¡¨å–®
3. å¯¦ä½œæ¨¡çµ„å•Ÿç”¨/åœç”¨åŠŸèƒ½
4. å¯¦ä½œè—åœ–åˆªé™¤/å°å­˜åŠŸèƒ½

---

### ğŸ‰ æœ€æ–°å®Œæˆé€²åº¦ï¼ˆé‡å¤§é‡Œç¨‹ç¢‘ï¼‰

ä»¥ä¸‹éª¨æ¶ç´šåˆ¥åŸºç¤è¨­æ–½å·²å®Œæˆï¼Œç‚ºå¾ŒçºŒæ¥­å‹™æ¨¡çµ„é–‹ç™¼å¥ å®šåŸºç¤ï¼š

| æ¨¡çµ„ | å®Œæˆé …ç›® | ç‹€æ…‹ |
|------|---------|------|
| **âœ¨ è—åœ– UI æ•´åˆ** | æ¦‚è¦½ Tabs + èœå–®é…ç½® + è²¡å‹™å…¥å£æŒ‰éˆ• | âœ… å®Œæˆ |
| **âœ¨ äº‹ä»¶ç¸½ç·šç³»çµ±** | EventBusService + äº‹ä»¶é¡å‹ç³»çµ± + äº‹ä»¶å·¥å»  | âœ… å®Œæˆ |
| **âœ¨ æª”æ¡ˆç®¡ç†åŸºç¤** | FileRepository + FileService + é¡å‹å®šç¾© | âœ… å®Œæˆ |
| **âœ¨ é€šçŸ¥ä¸­å¿ƒ** | NotificationRepository + NotificationService + UI å…ƒä»¶ + Realtime | âœ… å®Œæˆ |
| **âœ¨ æ¬Šé™æŒ‡ä»¤** | *hasPermission + *hasRole + *isOwner Directives | âœ… å®Œæˆ |
| **ä»»å‹™ç®¡ç†** | TaskRepository + TaskService + å®Œæ•´ UI | ğŸ”¶ 85% |
| **è—åœ–ç®¡ç†** | BlueprintRepository + BlueprintService å®Œæ•´å¯¦ä½œ | ğŸ”¶ 70% |
| **è²¡å‹™ç®¡ç†** | FinancialRepository + FinancialService + å®Œæ•´ CRUD UI | ğŸ”¶ 75% |
| **è—åœ–æˆå“¡** | BlueprintMemberRepository å®Œæ•´å¯¦ä½œ | âœ… å®Œæˆ |
| **æœå°‹å¼•æ“** | SearchRepository + SearchService + HeaderSearchComponent | âœ… å®Œæˆ |

### æŠ€è¡“æ¶æ§‹ç¾æ³

| å±¤ç´š | å…ƒä»¶ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|------|
| **Repository å±¤** | TaskRepository | âœ… å®Œæˆ | å®Œæ•´ CRUD + æŸ¥è©¢é¸é … |
| **Repository å±¤** | BlueprintRepository | âœ… å®Œæˆ | å®Œæ•´ CRUD + æˆå“¡ç®¡ç† |
| **Repository å±¤** | FinancialRepository | âœ… å®Œæˆ | åˆç´„ã€è²»ç”¨ã€è«‹æ¬¾ã€ä»˜æ¬¾ç®¡ç† |
| **Repository å±¤** | SearchRepository | âœ… å®Œæˆ | å¤šå¯¦é«”å…¨æ–‡æœå°‹ + æ­·å²è¨˜éŒ„ |
| **Repository å±¤** | FileRepository | âœ… å®Œæˆ | æª”æ¡ˆ CRUD + åˆ†äº« + çµ±è¨ˆ |
| **Repository å±¤** | NotificationRepository | âœ… å®Œæˆ | é€šçŸ¥ CRUD + Realtime è¨‚é–± |
| **Repository å±¤** | DiaryRepository | ğŸ”´ å¾…å»ºç«‹ | æ—¥èªŒè³‡æ–™å­˜å–å±¤ |
| **Repository å±¤** | AuditLogRepository | ğŸ”´ å¾…å»ºç«‹ | å¯©è¨ˆæ—¥èªŒè³‡æ–™å­˜å–å±¤ |
| **Service å±¤** | TaskService | âœ… å®Œæˆ | ä½¿ç”¨ Signals + linkedSignal |
| **Service å±¤** | BlueprintService | âœ… å®Œæˆ | å®Œæ•´æ¥­å‹™é‚è¼¯ |
| **Service å±¤** | FinancialService | âœ… å®Œæˆ | è²¡å‹™æ¥­å‹™é‚è¼¯ |
| **Service å±¤** | SearchService | âœ… å®Œæˆ | Signals éŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç† |
| **Service å±¤** | EventBusService | âœ… å®Œæˆ | äº‹ä»¶ç™¼å¸ƒ/è¨‚é–± + éæ¿¾ |
| **Service å±¤** | FileService | âœ… å®Œæˆ | æª”æ¡ˆæ¥­å‹™é‚è¼¯ + Signals |
| **Service å±¤** | NotificationService | âœ… å®Œæˆ | é€šçŸ¥æ¥­å‹™é‚è¼¯ + Realtime + Signals |
| **UI å…ƒä»¶** | TasksComponent | âœ… å®Œæˆ | æ¨¹ç‹€/è¡¨æ ¼/çœ‹æ¿è¦–åœ– |
| **UI å…ƒä»¶** | TaskEditDrawerComponent | âœ… å®Œæˆ | ä»»å‹™ç·¨è¼¯æŠ½å±œ |
| **UI å…ƒä»¶** | HeaderSearchComponent | âœ… å®Œæˆ | ä¼æ¥­ç´šå…¨åŸŸæœå°‹å…ƒä»¶ |
| **UI å…ƒä»¶** | HeaderNotifyComponent | âœ… å®Œæˆ | é€šçŸ¥ä¸­å¿ƒ Header Widget |
| **æŒ‡ä»¤** | *hasPermission | âœ… å®Œæˆ | æ¬Šé™æ§åˆ¶æŒ‡ä»¤ |
| **æŒ‡ä»¤** | *hasRole | âœ… å®Œæˆ | è§’è‰²æ§åˆ¶æŒ‡ä»¤ |
| **æŒ‡ä»¤** | *isOwner | âœ… å®Œæˆ | æ“æœ‰è€…æ§åˆ¶æŒ‡ä»¤ |

---

## ğŸ—ï¸ éª¨æ¶ç´šåˆ¥åŠŸèƒ½å„ªå…ˆç´šåˆ†æ

### âœ… å·²å®Œæˆçš„éª¨æ¶ç´šåˆ¥åŠŸèƒ½

ä»¥ä¸‹æ ¸å¿ƒéª¨æ¶ç´šåˆ¥åŠŸèƒ½å·²å®Œæˆï¼Œç‚ºæ¥­å‹™æ¨¡çµ„é–‹ç™¼å¥ å®šäº†å …å¯¦åŸºç¤ï¼š

#### âœ… äº‹ä»¶ç¸½ç·šç³»çµ± (Event Bus System) - å·²å®Œæˆ

**å¯¦ä½œä½ç½®**ï¼š
- `src/app/shared/services/event-bus/event-bus.service.ts`
- `src/app/core/infra/types/event/event.types.ts`
- `src/app/core/infra/types/event/event.factory.ts`

**å·²å¯¦ç¾åŠŸèƒ½**ï¼š
- âœ… EventBusService - å®Œæ•´çš„ç™¼å¸ƒ/è¨‚é–±æ©Ÿåˆ¶
- âœ… äº‹ä»¶é¡å‹å®šç¾©ç³»çµ± - æ¶µè“‹ 8 å¤§é¡åˆ¥äº‹ä»¶
- âœ… äº‹ä»¶éæ¿¾å’Œè·¯ç”± - æ”¯æ´å¤šç¶­åº¦éæ¿¾
- âœ… äº‹ä»¶å·¥å»  - æ¨™æº–åŒ–äº‹ä»¶å‰µå»º
- âœ… é¡å‹å®‰å…¨çš„äº‹ä»¶ Payload å®šç¾©

#### âœ… æª”æ¡ˆç®¡ç†åŸºç¤æ¶æ§‹ (File Management Infrastructure) - å·²å®Œæˆ

**å¯¦ä½œä½ç½®**ï¼š
- `src/app/core/infra/repositories/file/file.repository.ts`
- `src/app/core/infra/types/file/file.types.ts`
- `src/app/shared/services/file/file.service.ts`

**å·²å¯¦ç¾åŠŸèƒ½**ï¼š
- âœ… FileRepository - å®Œæ•´ CRUD + åˆ†äº« + çµ±è¨ˆ
- âœ… FileService - Signals éŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç†
- âœ… File Types å®šç¾© - å®Œæ•´çš„é¡å‹ç³»çµ±

**å¾…é…ç½®é …ç›®**ï¼š
- [ ] Supabase Storage bucket é…ç½®ï¼ˆéœ€åœ¨ Dashboard æ“ä½œï¼‰
- [ ] æª”æ¡ˆä¸Šå‚³ UI å…ƒä»¶æ•´åˆ

#### âœ… é€šçŸ¥ä¸­å¿ƒåŸºç¤æ¶æ§‹ (Notification Hub) - å·²å®Œæˆ

**å¯¦ä½œä½ç½®**ï¼š
- `src/app/core/infra/repositories/notification/notification.repository.ts`
- `src/app/core/infra/types/notification/notification.types.ts`
- `src/app/shared/services/notification/notification.service.ts`
- `src/app/layout/basic/widgets/notify.component.ts`

**å·²å¯¦ç¾åŠŸèƒ½**ï¼š
- âœ… NotificationRepository - å®Œæ•´ CRUD + Realtime è¨‚é–±
- âœ… NotificationService - Signals éŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç† + åˆ†é¡
- âœ… Supabase Realtime æ•´åˆ - å³æ™‚æ¨é€
- âœ… HeaderNotifyComponent - é€šçŸ¥ UI å…ƒä»¶

**å¾…å®Œæˆé …ç›®**ï¼š
- [ ] Email é€šçŸ¥æ•´åˆ
- [ ] é€šçŸ¥åå¥½è¨­å®š UI

#### âœ… æ¬Šé™æŒ‡ä»¤å…ƒä»¶ (Permission Directive) - å·²å®Œæˆ

**å¯¦ä½œä½ç½®**ï¼š
- `src/app/shared/directives/permission.directive.ts`

**å·²å¯¦ç¾åŠŸèƒ½**ï¼š
- âœ… `*hasPermission` Directive - æ¬Šé™æ§åˆ¶
- âœ… `*hasRole` Directive - è§’è‰²æ§åˆ¶
- âœ… `*isOwner` Directive - æ“æœ‰è€…æ§åˆ¶
- âœ… æ”¯æ´ else æ¨¡æ¿
- âœ… Signal-based éŸ¿æ‡‰å¼æ›´æ–°

---

### ğŸ”´ å¾…é–‹ç™¼çš„éª¨æ¶ç´šåˆ¥åŠŸèƒ½

#### 1. æ“ä½œå¯©è¨ˆæ—¥èªŒç³»çµ± (Audit Log System) â­â­â­â­

**éª¨æ¶ç´šåˆ¥**ï¼šé«˜å„ªå…ˆç´š  
**ä¾è³´æ•¸é‡**ï¼šæ‰€æœ‰æ¨¡çµ„  
**é–‹ç™¼é€±æœŸ**ï¼š1-2 é€±  
**ç•¶å‰ç‹€æ…‹**ï¼šğŸ”´ 0%

**ç‚ºä»€éº¼æ˜¯éª¨æ¶ç´šåˆ¥**ï¼š
- ä¼æ¥­åˆè¦è¦æ±‚
- æ‰€æœ‰è³‡æ–™è®Šæ›´éƒ½éœ€è¦è¨˜éŒ„
- å¯åŸºæ–¼å·²å®Œæˆçš„äº‹ä»¶ç¸½ç·šè‡ªå‹•è¨˜éŒ„

**ä¾è³´é—œä¿‚**ï¼š
```
å¯©è¨ˆæ—¥èªŒç³»çµ±
  â”œâ”€â†’ äº‹ä»¶ç¸½ç·šï¼ˆâœ… å·²å®Œæˆ - ç›£è½æ‰€æœ‰äº‹ä»¶ï¼‰
  â”œâ”€â†’ è³‡æ–™åº«è§¸ç™¼å™¨ï¼ˆå¾…å»ºç«‹ï¼‰
  â””â”€â†’ æ‰€æœ‰ Repositoryï¼ˆæ“ä½œè¨˜éŒ„ï¼‰
```

**å¾…å®Œæˆé …ç›®**ï¼š
- [ ] AuditLogRepository - å¯©è¨ˆæ—¥èªŒè³‡æ–™å­˜å–å±¤
- [ ] AuditLogService - å¯©è¨ˆæ—¥èªŒæ¥­å‹™é‚è¼¯
- [ ] è³‡æ–™åº«è§¸ç™¼å™¨ï¼ˆè‡ªå‹•è¨˜éŒ„ CRUD æ“ä½œï¼‰
- [ ] æ•´åˆ EventBusServiceï¼ˆç›£è½äº‹ä»¶ä¸¦è¨˜éŒ„ï¼‰
- [ ] å¯©è¨ˆæ—¥èªŒæŸ¥è©¢ä»‹é¢
- [ ] å¯©è¨ˆæ—¥èªŒè¦–è¦ºåŒ–ï¼ˆæ™‚é–“è»¸è¦–åœ–ï¼‰

---

#### 2. æ™‚é–“è¿½è¹¤åŸºç¤æ¶æ§‹ (Time Tracking Infrastructure) â­â­â­

**éª¨æ¶ç´šåˆ¥**ï¼šä¸­å„ªå…ˆç´š  
**ä¾è³´æ•¸é‡**ï¼š2+ æ¨¡çµ„ï¼ˆä»»å‹™ã€æ—¥èªŒï¼‰  
**é–‹ç™¼é€±æœŸ**ï¼š1 é€±  
**ç•¶å‰ç‹€æ…‹**ï¼šğŸ”´ 0%

**ç‚ºä»€éº¼æ˜¯éª¨æ¶ç´šåˆ¥**ï¼š
- å¤šå€‹æ¨¡çµ„éœ€è¦ï¼ˆä»»å‹™ã€æ—¥èªŒï¼‰
- å¯å…ˆå»ºç«‹åŸºç¤æ¶æ§‹ï¼Œå†æ“´å±•åˆ°å„æ¨¡çµ„

**å¾…å®Œæˆé …ç›®**ï¼š
- [ ] æ–°å¢ `task_time_entries` è³‡æ–™è¡¨
- [ ] TimeEntryRepository
- [ ] TimeTrackingService
- [ ] æ™‚é–“è¿½è¹¤ UI å…ƒä»¶

---

### ğŸ“Š æ›´æ–°å¾Œçš„é–‹ç™¼è·¯ç·šåœ–

```
âœ… Phase 1: æ ¸å¿ƒéª¨æ¶ï¼ˆå·²å®Œæˆï¼‰
â”œâ”€ âœ… äº‹ä»¶ç¸½ç·šç³»çµ± - EventBusService + äº‹ä»¶é¡å‹
â”œâ”€ âœ… æª”æ¡ˆç®¡ç†åŸºç¤ - FileRepository + FileService
â”œâ”€ âœ… é€šçŸ¥ä¸­å¿ƒåŸºç¤ - NotificationService + HeaderNotifyComponent
â””â”€ âœ… æ¬Šé™æŒ‡ä»¤å…ƒä»¶ - *hasPermission + *hasRole + *isOwner

ğŸ”´ Phase 2: å‰©é¤˜éª¨æ¶ï¼ˆ1-2 é€±ï¼‰
â”œâ”€ Week 1: å¯©è¨ˆæ—¥èªŒç³»çµ±
â”‚   â”œâ”€ AuditLogRepository
â”‚   â”œâ”€ AuditLogService
â”‚   â”œâ”€ è³‡æ–™åº«è§¸ç™¼å™¨
â”‚   â”œâ”€ æ•´åˆäº‹ä»¶ç¸½ç·š
â”‚   â””â”€ å¯©è¨ˆæ—¥èªŒæŸ¥è©¢ä»‹é¢
â”‚
â””â”€ Week 2: æ™‚é–“è¿½è¹¤åŸºç¤
    â”œâ”€ TimeEntryRepository
    â”œâ”€ TimeTrackingService
    â””â”€ æ™‚é–“è¿½è¹¤ UI å…ƒä»¶

ğŸ”´ Phase 3: æ¥­å‹™æ¨¡çµ„é–‹ç™¼ï¼ˆ2-4 é€±ï¼‰
â”œâ”€ Week 3-4: æ–½å·¥æ—¥èªŒæ¨¡çµ„
â”‚   â”œâ”€ DiaryRepository
â”‚   â”œâ”€ DiaryService
â”‚   â””â”€ æ—¥èªŒåˆ—è¡¨/è¡¨å–® UI
â”‚
â””â”€ Week 5-6: ä»»å‹™æ¨¡çµ„å®Œå–„
    â”œâ”€ ä»»å‹™è©•è«–åŠŸèƒ½
    â”œâ”€ ä»»å‹™é™„ä»¶æ•´åˆ
    â””â”€ ä»»å‹™æ­·å²è¨˜éŒ„
```

---

## ğŸ¯ é–‹ç™¼å„ªå…ˆç´šå»ºè­°

åŸºæ–¼å°ˆæ¡ˆç¾æ³åˆ†æï¼Œéª¨æ¶ç´šåˆ¥åŸºç¤è¨­æ–½å·²å¤§éƒ¨åˆ†å®Œæˆï¼Œä»¥ä¸‹æ˜¯å»ºè­°çš„ä¸‹ä¸€æ­¥é–‹ç™¼é †åºï¼š

### ğŸ”´ æœ€é«˜å„ªå…ˆç´š - å‰©é¤˜éª¨æ¶ç´šåˆ¥åŸºç¤è¨­æ–½ (1-2 é€±)

#### 1. å¯©è¨ˆæ—¥èªŒç³»çµ± (Audit Log System) â­â­â­â­

**ç¾æ³**ï¼šå®Œå…¨æœªå¯¦ç¾ï¼ˆ0%ï¼‰  
**å„ªå…ˆç´š**ï¼šæœ€é«˜ï¼ˆä¼æ¥­åˆè¦è¦æ±‚ï¼‰

**å¾…å®Œæˆé …ç›®**ï¼š
1. **AuditLogRepository** - å¯©è¨ˆæ—¥èªŒè³‡æ–™å­˜å–å±¤
2. **AuditLogService** - å¯©è¨ˆæ—¥èªŒæ¥­å‹™é‚è¼¯ï¼ˆä½¿ç”¨ Signalsï¼‰
3. **æ•´åˆ EventBusService** - ç›£è½äº‹ä»¶ä¸¦è‡ªå‹•è¨˜éŒ„
4. **è³‡æ–™åº«è§¸ç™¼å™¨** - è‡ªå‹•è¨˜éŒ„ CRUD æ“ä½œ
5. **å¯©è¨ˆæ—¥èªŒæŸ¥è©¢ä»‹é¢** - æ™‚é–“è»¸è¦–åœ–

**ç‚ºä»€éº¼å„ªå…ˆ**ï¼š
- ä¼æ¥­åˆè¦è¦æ±‚
- äº‹ä»¶ç¸½ç·šå·²å®Œæˆï¼Œå¯ç›´æ¥æ•´åˆ
- æ‰€æœ‰æ¨¡çµ„éƒ½éœ€è¦æ“ä½œè¨˜éŒ„

---

### ğŸ”´ æœ€é«˜å„ªå…ˆç´š - æ¥­å‹™æ¨¡çµ„ (2-4 é€±)

#### 2. æ–½å·¥æ—¥èªŒæ¨¡çµ„ (Diary Module) â­â­â­â­â­

**ç¾æ³**ï¼šè³‡æ–™åº«å·²è¨­è¨ˆå®Œæˆï¼ˆ15%ï¼‰ï¼Œå‰ç«¯å’Œæœå‹™å±¤å°šæœªå¯¦ä½œ  
**ä¾è³´**ï¼šæª”æ¡ˆç®¡ç†åŸºç¤ï¼ˆâœ… å·²å®Œæˆï¼‰

**å¾…å®Œæˆé …ç›®**ï¼š
1. **DiaryRepository** - æ—¥èªŒè³‡æ–™å­˜å–å±¤
2. **DiaryService** - æ—¥èªŒæ¥­å‹™é‚è¼¯ï¼ˆä½¿ç”¨ Signalsï¼‰
3. **æ—¥èªŒåˆ—è¡¨é é¢** - `routes/blueprint/diary/diary-list/`
4. **æ—¥èªŒå»ºç«‹/ç·¨è¼¯è¡¨å–®** - `routes/blueprint/diary/diary-form/`
5. **æ—¥èªŒæ¢ç›®ç®¡ç†** - å·¥ä½œé …ç›®è¨˜éŒ„
6. **å¤©æ°£é¸æ“‡å™¨** - åŸºæ–¼ `weather_type` æšèˆ‰
7. **æ—¥èªŒé™„ä»¶åŠŸèƒ½** - æ•´åˆ FileServiceï¼ˆç…§ç‰‡ä¸Šå‚³ï¼‰

**å·²æœ‰è³‡æ–™è¡¨**ï¼š
- `diaries` - æ—¥èªŒä¸»è¡¨
- `diary_attachments` - æ—¥èªŒé™„ä»¶

**ç‚ºä»€éº¼å„ªå…ˆ**ï¼š
- å·¥åœ°ä¸»ä»»æ¯æ—¥å¿…ç”¨åŠŸèƒ½
- æ³•è¦è¦æ±‚çš„æ–½å·¥ç´€éŒ„
- è³‡æ–™åº«çµæ§‹å·²å°±ç·’
- æª”æ¡ˆç®¡ç†åŸºç¤å·²å®Œæˆï¼Œå¯ç›´æ¥æ•´åˆé™„ä»¶åŠŸèƒ½
- å¯åƒè€ƒ TaskModule çš„æ¶æ§‹æ¨¡å¼

**å»ºè­°æª”æ¡ˆçµæ§‹**ï¼š
```
src/app/
â”œâ”€â”€ core/infra/repositories/diary/
â”‚   â”œâ”€â”€ diary.repository.ts      â† å¾…å»ºç«‹
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ core/infra/types/diary/
â”‚   â”œâ”€â”€ diary.types.ts           â† å¾…å»ºç«‹
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ shared/services/diary/
â”‚   â”œâ”€â”€ diary.service.ts         â† å¾…å»ºç«‹
â”‚   â””â”€â”€ index.ts
â””â”€â”€ routes/blueprint/diary/
    â”œâ”€â”€ diary-list.component.ts  â† å¾…å»ºç«‹
    â”œâ”€â”€ diary-form.component.ts  â† å¾…å»ºç«‹
    â””â”€â”€ routes.ts                â† å¾…å»ºç«‹
```

---

### ğŸŸ  é«˜å„ªå…ˆç´š - çŸ­æœŸç›®æ¨™ (2-4 é€±)

#### 3. ä»»å‹™æ¨¡çµ„å®Œå–„ â­â­â­â­

**ç¾æ³**ï¼šæ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆï¼ˆ85%ï¼‰ï¼Œéœ€å®Œå–„ç´°ç¯€

**å¾…å®Œæˆé …ç›®**ï¼š
1. **ä»»å‹™é™„ä»¶åŠŸèƒ½** - æ•´åˆ FileServiceï¼ˆâœ… å·²å®Œæˆï¼‰
2. **ä»»å‹™è©•è«–åŠŸèƒ½** - ä½¿ç”¨ `task_comments` è³‡æ–™è¡¨
3. **ä»»å‹™æ­·å²è¨˜éŒ„** - æ•´åˆå¯©è¨ˆæ—¥èªŒç³»çµ±
4. **æ‹–æ›³æ’åº** - ä»»å‹™é †åºèª¿æ•´

---

#### 4. Supabase Storage é…ç½® â­â­â­â­

**ç¾æ³**ï¼šFileRepository + FileService å·²å®Œæˆï¼Œéœ€é…ç½® Storage

**å¾…å®Œæˆé …ç›®**ï¼š
1. **åœ¨ Supabase Dashboard å»ºç«‹ bucket**
   - `blueprint-files` - è—åœ–ç›¸é—œæª”æ¡ˆ
   - `task-attachments` - ä»»å‹™é™„ä»¶
   - `diary-photos` - æ—¥èªŒç…§ç‰‡
2. **è¨­å®š RLS æ”¿ç­–** - æ ¹æ“šè—åœ–æˆå“¡æ¬Šé™æ§åˆ¶å­˜å–
3. **æª”æ¡ˆä¸Šå‚³ UI å…ƒä»¶** - æ‹–æ‹‰ä¸Šå‚³ + é€²åº¦é¡¯ç¤º

---

### ğŸŸ¡ ä¸­å„ªå…ˆç´š - ä¸­æœŸç›®æ¨™ (4-6 é€±)

#### 5. å•é¡Œè¿½è¹¤æ¨¡çµ„ (Issue Module) â­â­â­

**ç¾æ³**ï¼šè³‡æ–™è¡¨å·²è¨­è¨ˆ (`issues`, `issue_comments`)ï¼Œå‰ç«¯æœªå¯¦ç¾

**å¾…å®Œæˆé …ç›®**ï¼š
1. **IssueRepository** - å•é¡Œè³‡æ–™å­˜å–å±¤
2. **IssueService** - å•é¡Œæ¥­å‹™é‚è¼¯
3. **å•é¡Œåˆ—è¡¨/è©³æƒ…é é¢** - UI å…ƒä»¶
4. **å•é¡Œè©•è«–åŠŸèƒ½** - è¨è«–ç•™è¨€

#### 6. æ™‚é–“è¿½è¹¤åŠŸèƒ½ â­â­â­

**ç¾æ³**ï¼šå®Œå…¨æœªå¯¦ç¾ï¼ˆ0%ï¼‰

**å¾…å®Œæˆé …ç›®**ï¼š
1. **æ–°å¢ `task_time_entries` è³‡æ–™è¡¨**
2. **TimeEntryRepository** - æ™‚é–“è¨˜éŒ„è³‡æ–™å­˜å–å±¤
3. **TimeTrackingService** - æ™‚é–“è¿½è¹¤æ¥­å‹™é‚è¼¯
4. **æ™‚é–“è¿½è¹¤ UI å…ƒä»¶** - è¨ˆæ™‚å™¨ã€æ™‚é–“è¨˜éŒ„

---

### ğŸŸ¢ ä¸€èˆ¬å„ªå…ˆç´š - é•·æœŸç›®æ¨™ (6+ é€±)

#### 7. å“è³ªé©—æ”¶æ¨¡çµ„ â­â­

**ç¾æ³**ï¼šè³‡æ–™è¡¨å·²è¨­è¨ˆ (`task_acceptances`, `checklists`, `checklist_items`)

**å¾…å»ºç«‹**ï¼š
- é©—æ”¶æ¸…å–®ç³»çµ±
- é©—æ”¶æµç¨‹ç®¡ç†
- é©—æ”¶å ±å‘Šç”¢ç”Ÿ

#### 8. Email é€šçŸ¥æ•´åˆ â­â­

**ç¾æ³**ï¼šé€šçŸ¥ä¸­å¿ƒå·²å®Œæˆï¼ŒEmail æ•´åˆæœªå¯¦ç¾

**å¾…å»ºç«‹**ï¼š
- Supabase Edge Functions æˆ–ç¬¬ä¸‰æ–¹æœå‹™
- Email æ¨¡æ¿è¨­è¨ˆ
- ç™¼é€æ’ç¨‹

---

## ğŸ“ ç¾æœ‰ç›®éŒ„çµæ§‹åƒè€ƒ

### Repository å±¤ï¼ˆå·²å®Œæˆï¼‰
```
src/app/core/infra/repositories/
â”œâ”€â”€ account/
â”‚   â”œâ”€â”€ account.repository.ts    âœ…
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ blueprint/
â”‚   â”œâ”€â”€ blueprint.repository.ts  âœ…
â”‚   â”œâ”€â”€ blueprint-member.repository.ts âœ…
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ file/
â”‚   â”œâ”€â”€ file.repository.ts       âœ… æ–°å®Œæˆ
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ financial/
â”‚   â”œâ”€â”€ financial.repository.ts  âœ…
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ notification/
â”‚   â”œâ”€â”€ notification.repository.ts âœ… æ–°å®Œæˆ
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ search/
â”‚   â”œâ”€â”€ search.repository.ts     âœ…
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ task/
â”‚   â”œâ”€â”€ task.repository.ts       âœ…
â”‚   â””â”€â”€ index.ts
â””â”€â”€ index.ts
```

### Types å±¤ï¼ˆå·²å®Œæˆï¼‰
```
src/app/core/infra/types/
â”œâ”€â”€ account/                     âœ…
â”œâ”€â”€ blueprint/                   âœ…
â”œâ”€â”€ event/                       âœ… æ–°å®Œæˆ
â”‚   â”œâ”€â”€ event.types.ts           âœ… å®Œæ•´äº‹ä»¶é¡å‹å®šç¾©
â”‚   â”œâ”€â”€ event.factory.ts         âœ… äº‹ä»¶å·¥å» 
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ file/                        âœ… æ–°å®Œæˆ
â”‚   â”œâ”€â”€ file.types.ts            âœ… æª”æ¡ˆé¡å‹å®šç¾©
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ financial/                   âœ…
â”œâ”€â”€ notification/                âœ… æ–°å®Œæˆ
â”‚   â”œâ”€â”€ notification.types.ts    âœ… é€šçŸ¥é¡å‹å®šç¾©
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ permission/                  âœ…
â”œâ”€â”€ search/                      âœ…
â”œâ”€â”€ task/                        âœ…
â””â”€â”€ index.ts
```

### Service å±¤ï¼ˆå·²å®Œæˆï¼‰
```
src/app/shared/services/
â”œâ”€â”€ account/
â”‚   â””â”€â”€ account.service.ts       âœ…
â”œâ”€â”€ blueprint/
â”‚   â””â”€â”€ blueprint.service.ts     âœ…
â”œâ”€â”€ event-bus/
â”‚   â”œâ”€â”€ event-bus.service.ts     âœ… æ–°å®Œæˆ
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ file/
â”‚   â”œâ”€â”€ file.service.ts          âœ… æ–°å®Œæˆ
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ financial/
â”‚   â””â”€â”€ financial.service.ts     âœ…
â”œâ”€â”€ menu/
â”‚   â””â”€â”€ menu.service.ts          âœ…
â”œâ”€â”€ notification/
â”‚   â”œâ”€â”€ notification.service.ts  âœ… æ–°å®Œæˆ
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ permission/
â”‚   â””â”€â”€ permission.service.ts    âœ…
â”œâ”€â”€ search/
â”‚   â””â”€â”€ search.service.ts        âœ…
â”œâ”€â”€ task/
â”‚   â””â”€â”€ task.service.ts          âœ…
â””â”€â”€ index.ts
```

### æŒ‡ä»¤å±¤ï¼ˆå·²å®Œæˆï¼‰
```
src/app/shared/directives/
â”œâ”€â”€ permission.directive.ts      âœ… æ–°å®Œæˆ
â”‚   â”œâ”€â”€ HasPermissionDirective   âœ… *hasPermission
â”‚   â”œâ”€â”€ HasRoleDirective         âœ… *hasRole
â”‚   â””â”€â”€ IsOwnerDirective         âœ… *isOwner
â””â”€â”€ index.ts
```

### è·¯ç”±é é¢ï¼ˆéƒ¨åˆ†å®Œæˆï¼‰
```
src/app/routes/
â”œâ”€â”€ blueprint/
â”‚   â”œâ”€â”€ list/                    âœ… è—åœ–åˆ—è¡¨
â”‚   â”œâ”€â”€ create-blueprint/        âœ… å»ºç«‹è—åœ–
â”‚   â”œâ”€â”€ overview/                âœ… è—åœ–ç¸½è¦½
â”‚   â”œâ”€â”€ members/                 âœ… æˆå“¡ç®¡ç†
â”‚   â”œâ”€â”€ tasks/                   âœ… ä»»å‹™ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ tasks.component.ts
â”‚   â”‚   â””â”€â”€ task-edit-drawer.component.ts
â”‚   â”œâ”€â”€ diary/                   ğŸ”´ å¾…å»ºç«‹
â”‚   â”œâ”€â”€ issues/                  ğŸ”´ å¾…å»ºç«‹
â”‚   â”œâ”€â”€ files/                   ğŸ”´ å¾…å»ºç«‹
â”‚   â””â”€â”€ routes.ts
â”œâ”€â”€ account/                     âœ…
â”œâ”€â”€ passport/                    âœ…
â””â”€â”€ ...
```

### UI å…ƒä»¶ï¼ˆå·²å®Œæˆï¼‰
```
src/app/layout/basic/widgets/
â”œâ”€â”€ notify.component.ts          âœ… æ–°å®Œæˆ - é€šçŸ¥ä¸­å¿ƒ Header Widget
â”œâ”€â”€ search.component.ts          âœ… å…¨åŸŸæœå°‹å…ƒä»¶
â”œâ”€â”€ ...
```

---

## ğŸ”§ æŠ€è¡“å¯¦ä½œå»ºè­°

### 1. DiaryRepository åƒè€ƒå¯¦ä½œï¼ˆåƒè€ƒç¾æœ‰æ¨¡å¼ï¼‰

```typescript
// src/app/core/infra/repositories/diary/diary.repository.ts
import { Injectable, inject } from '@angular/core';
import { Observable, from, map } from 'rxjs';
import { SupabaseService } from '@core';
import { Diary, CreateDiaryRequest, UpdateDiaryRequest, DiaryQueryOptions } from '../../types/diary';

@Injectable({ providedIn: 'root' })
export class DiaryRepository {
  // Angular 20: ä½¿ç”¨ inject() å‡½æ•¸é€²è¡Œä¾è³´æ³¨å…¥
  private readonly supabase = inject(SupabaseService);

  /**
   * æ ¹æ“šè—åœ–æŸ¥è©¢æ—¥èªŒ
   * Find diaries by blueprint
   */
  findByBlueprint(blueprintId: string): Observable<Diary[]> {
    return from(
      this.supabase.client
        .from('diaries')
        .select('*')
        .eq('blueprint_id', blueprintId)
        .is('deleted_at', null)
        .order('work_date', { ascending: false })
    ).pipe(
      map(({ data, error }) => {
        if (error) {
          console.error('[DiaryRepository] findByBlueprint error:', error);
          return [];
        }
        return (data || []) as Diary[];
      })
    );
  }

  /**
   * æ ¹æ“šæ—¥æœŸæŸ¥è©¢æ—¥èªŒ
   * Find diary by date
   */
  findByDate(blueprintId: string, date: string): Observable<Diary | null> {
    return from(
      this.supabase.client
        .from('diaries')
        .select('*')
        .eq('blueprint_id', blueprintId)
        .eq('work_date', date)
        .is('deleted_at', null)
        .single()
    ).pipe(
      map(({ data, error }) => {
        if (error) {
          if (error.code === 'PGRST116') return null; // Not found
          console.error('[DiaryRepository] findByDate error:', error);
          return null;
        }
        return data as Diary;
      })
    );
  }

  /**
   * å»ºç«‹æ—¥èªŒ
   * Create a new diary
   */
  create(request: CreateDiaryRequest, createdBy: string): Observable<Diary | null> {
    return from(
      this.supabase.client
        .from('diaries')
        .insert({
          ...request,
          status: 'draft',
          created_by: createdBy
        })
        .select()
        .single()
    ).pipe(
      map(({ data, error }) => {
        if (error) {
          console.error('[DiaryRepository] create error:', error);
          return null;
        }
        return data as Diary;
      })
    );
  }

  /**
   * æ›´æ–°æ—¥èªŒ
   * Update a diary
   */
  update(id: string, updates: UpdateDiaryRequest): Observable<Diary | null> {
    return from(
      this.supabase.client
        .from('diaries')
        .update({
          ...updates,
          updated_at: new Date().toISOString()
        })
        .eq('id', id)
        .select()
        .single()
    ).pipe(
      map(({ data, error }) => {
        if (error) {
          console.error('[DiaryRepository] update error:', error);
          return null;
        }
        return data as Diary;
      })
    );
  }

  /**
   * æ ¸å‡†æ—¥èªŒ
   * Approve a diary
   */
  approve(id: string, approvedBy: string): Observable<Diary | null> {
    return from(
      this.supabase.client
        .from('diaries')
        .update({
          status: 'approved',
          approved_by: approvedBy,
          approved_at: new Date().toISOString(),
          updated_at: new Date().toISOString()
        })
        .eq('id', id)
        .select()
        .single()
    ).pipe(
      map(({ data, error }) => {
        if (error) {
          console.error('[DiaryRepository] approve error:', error);
          return null;
        }
        return data as Diary;
      })
    );
  }
}
```

### 2. DiaryService åƒè€ƒå¯¦ä½œï¼ˆä½¿ç”¨ Signalsï¼‰

```typescript
// src/app/shared/services/diary/diary.service.ts
import { Injectable, inject, signal, computed } from '@angular/core';
import { DiaryRepository, Diary, CreateDiaryRequest, UpdateDiaryRequest } from '@core';
import { firstValueFrom } from 'rxjs';

@Injectable({ providedIn: 'root' })
export class DiaryService {
  private readonly repo = inject(DiaryRepository);

  // State signals
  private diariesState = signal<Diary[]>([]);
  private selectedDiaryState = signal<Diary | null>(null);
  private loadingState = signal<boolean>(false);
  private errorState = signal<string | null>(null);

  // Readonly signals
  readonly diaries = this.diariesState.asReadonly();
  readonly selectedDiary = this.selectedDiaryState.asReadonly();
  readonly loading = this.loadingState.asReadonly();
  readonly error = this.errorState.asReadonly();

  // Computed signals
  readonly diaryCount = computed(() => this.diariesState().length);
  readonly hasError = computed(() => this.errorState() !== null);
  readonly draftDiaries = computed(() => 
    this.diariesState().filter(d => d.status === 'draft')
  );
  readonly approvedDiaries = computed(() => 
    this.diariesState().filter(d => d.status === 'approved')
  );

  /**
   * è¼‰å…¥è—åœ–çš„æ‰€æœ‰æ—¥èªŒ
   * Load all diaries for a blueprint
   */
  async loadDiaries(blueprintId: string): Promise<Diary[]> {
    this.loadingState.set(true);
    this.errorState.set(null);

    try {
      const diaries = await firstValueFrom(this.repo.findByBlueprint(blueprintId));
      this.diariesState.set(diaries);
      return diaries;
    } catch (err) {
      const message = err instanceof Error ? err.message : 'è¼‰å…¥æ—¥èªŒå¤±æ•—';
      this.errorState.set(message);
      throw err;
    } finally {
      this.loadingState.set(false);
    }
  }

  /**
   * å»ºç«‹æ—¥èªŒ
   * Create a new diary
   */
  async createDiary(request: CreateDiaryRequest, createdBy: string): Promise<Diary | null> {
    this.loadingState.set(true);
    this.errorState.set(null);

    try {
      const newDiary = await firstValueFrom(this.repo.create(request, createdBy));
      if (newDiary) {
        this.diariesState.update(list => [newDiary, ...list]);
      }
      return newDiary;
    } catch (err) {
      const message = err instanceof Error ? err.message : 'å»ºç«‹æ—¥èªŒå¤±æ•—';
      this.errorState.set(message);
      throw err;
    } finally {
      this.loadingState.set(false);
    }
  }

  /**
   * æ›´æ–°æ—¥èªŒ
   * Update a diary
   */
  async updateDiary(id: string, updates: UpdateDiaryRequest): Promise<Diary | null> {
    this.loadingState.set(true);
    this.errorState.set(null);

    try {
      const updated = await firstValueFrom(this.repo.update(id, updates));
      if (updated) {
        this.diariesState.update(list =>
          list.map(d => d.id === id ? updated : d)
        );
        if (this.selectedDiaryState()?.id === id) {
          this.selectedDiaryState.set(updated);
        }
      }
      return updated;
    } catch (err) {
      const message = err instanceof Error ? err.message : 'æ›´æ–°æ—¥èªŒå¤±æ•—';
      this.errorState.set(message);
      throw err;
    } finally {
      this.loadingState.set(false);
    }
  }

  /**
   * æ ¸å‡†æ—¥èªŒ
   * Approve a diary
   */
  async approveDiary(id: string, approvedBy: string): Promise<Diary | null> {
    return this.updateDiary(id, {
      status: 'approved',
      approved_by: approvedBy,
      approved_at: new Date().toISOString()
    } as UpdateDiaryRequest);
  }

  /**
   * é¸æ“‡æ—¥èªŒ
   * Select a diary
   */
  selectDiary(diary: Diary | null): void {
    this.selectedDiaryState.set(diary);
  }

  /**
   * æ¸…é™¤éŒ¯èª¤
   * Clear error
   */
  clearError(): void {
    this.errorState.set(null);
  }
}
```

### 3. AuditLogRepository åƒè€ƒå¯¦ä½œ

```typescript
// src/app/core/infra/repositories/audit-log/audit-log.repository.ts
import { Injectable, inject } from '@angular/core';
import { Observable, from, map } from 'rxjs';
import { SupabaseService } from '@core';

export interface AuditLog {
  id: string;
  entity_type: string;
  entity_id: string;
  action: string;
  actor_id: string;
  actor_name?: string;
  blueprint_id?: string;
  changes?: Record<string, { old: unknown; new: unknown }>;
  metadata?: Record<string, unknown>;
  created_at: string;
}

export interface AuditLogQueryOptions {
  blueprintId?: string;
  entityType?: string;
  entityId?: string;
  actorId?: string;
  action?: string;
  startDate?: string;
  endDate?: string;
  limit?: number;
  offset?: number;
}

@Injectable({ providedIn: 'root' })
export class AuditLogRepository {
  private readonly supabase = inject(SupabaseService);

  /**
   * æŸ¥è©¢å¯©è¨ˆæ—¥èªŒ
   * Query audit logs
   */
  query(options: AuditLogQueryOptions): Observable<AuditLog[]> {
    let query = this.supabase.client
      .from('audit_logs')
      .select('*')
      .order('created_at', { ascending: false });

    if (options.blueprintId) {
      query = query.eq('blueprint_id', options.blueprintId);
    }
    if (options.entityType) {
      query = query.eq('entity_type', options.entityType);
    }
    if (options.entityId) {
      query = query.eq('entity_id', options.entityId);
    }
    if (options.actorId) {
      query = query.eq('actor_id', options.actorId);
    }
    if (options.action) {
      query = query.eq('action', options.action);
    }
    if (options.startDate) {
      query = query.gte('created_at', options.startDate);
    }
    if (options.endDate) {
      query = query.lte('created_at', options.endDate);
    }
    if (options.limit) {
      query = query.limit(options.limit);
    }

    return from(query).pipe(
      map(({ data, error }) => {
        if (error) {
          console.error('[AuditLogRepository] query error:', error);
          return [];
        }
        return (data || []) as AuditLog[];
      })
    );
  }

  /**
   * è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
   * Create audit log entry
   */
  create(log: Omit<AuditLog, 'id' | 'created_at'>): Observable<AuditLog | null> {
    return from(
      this.supabase.client
        .from('audit_logs')
        .insert(log)
        .select()
        .single()
    ).pipe(
      map(({ data, error }) => {
        if (error) {
          console.error('[AuditLogRepository] create error:', error);
          return null;
        }
        return data as AuditLog;
      })
    );
  }

  /**
   * å–å¾—å¯¦é«”çš„æ­·å²è¨˜éŒ„
   * Get entity history
   */
  getEntityHistory(entityType: string, entityId: string): Observable<AuditLog[]> {
    return this.query({ entityType, entityId, limit: 100 });
  }
}
```

---


---

## ğŸ“ ç«‹å³è¡Œå‹•æ¸…å–®

> **å·²å®Œæˆ**ï¼šéª¨æ¶ç´šåˆ¥åŠŸèƒ½å·²å¤§éƒ¨åˆ†å®Œæˆï¼Œç¾åœ¨å¯ç›´æ¥é–‹ç™¼æ¥­å‹™æ¨¡çµ„ã€‚

### âœ… Phase 1: éª¨æ¶ç´šåˆ¥åŸºç¤è¨­æ–½ï¼ˆå·²å®Œæˆï¼‰

#### âœ… å·²å®Œæˆé …ç›®ï¼ˆç„¡éœ€æ“ä½œï¼‰

- [x] **äº‹ä»¶ç¸½ç·šç³»çµ±** - `src/app/shared/services/event-bus/`
  - EventBusService âœ…
  - äº‹ä»¶é¡å‹å®šç¾© âœ…
  - äº‹ä»¶å·¥å»  âœ…
  - äº‹ä»¶ç™¼å¸ƒ/è¨‚é–±æ©Ÿåˆ¶ âœ…

- [x] **æª”æ¡ˆç®¡ç†åŸºç¤** - `src/app/core/infra/repositories/file/`
  - FileRepository âœ…
  - FileService âœ…
  - File Types å®šç¾© âœ…

- [x] **é€šçŸ¥ä¸­å¿ƒ** - `src/app/shared/services/notification/`
  - NotificationRepository âœ…
  - NotificationService âœ…
  - Supabase Realtime æ•´åˆ âœ…
  - HeaderNotifyComponent âœ…

- [x] **æ¬Šé™æŒ‡ä»¤å…ƒä»¶** - `src/app/shared/directives/`
  - *hasPermission Directive âœ…
  - *hasRole Directive âœ…
  - *isOwner Directive âœ…

### ğŸŸ¡ Phase 1.5: UI ä¸€è‡´æ€§å„ªåŒ–ï¼ˆæ–°å¢ï¼‰

#### å„ªå…ˆç´š 0: UI ä¸€è‡´æ€§æ”¹é€²ï¼ˆ1-2 é€±ï¼‰

- [ ] **å»ºç«‹å…±ç”¨æ¨£å¼åº«** - `src/app/shared/styles/`
  ```bash
  mkdir -p src/app/shared/styles
  touch src/app/shared/styles/_variables.scss
  touch src/app/shared/styles/_stat-cards.scss
  touch src/app/shared/styles/_page-header.scss
  touch src/app/shared/styles/_filter-card.scss
  touch src/app/shared/styles/_drawer.scss
  touch src/app/shared/styles/_nav-card.scss
  touch src/app/shared/styles/_empty-state.scss
  ```

- [ ] **å»ºç«‹å…±ç”¨ UI å…ƒä»¶** - `src/app/shared/components/`
  - [ ] PageHeaderComponent - çµ±ä¸€é é¢æ¨™é ­
  - [ ] StatCardComponent - çµ±ä¸€çµ±è¨ˆå¡ç‰‡
  - [ ] NavCardComponent - çµ±ä¸€å°èˆªå¡ç‰‡
  - [ ] FilterCardComponent - çµ±ä¸€ç¯©é¸å™¨å®¹å™¨
  - [ ] EmptyStateComponent - çµ±ä¸€ç©ºç‹€æ…‹è™•ç†

- [ ] **é‡æ§‹ç¾æœ‰å…ƒä»¶** - ä½¿ç”¨å…±ç”¨æ¨£å¼å’Œå…ƒä»¶
  - [ ] BlueprintOverviewComponent
  - [ ] FinancialOverviewComponent
  - [ ] ContractListComponent
  - [ ] ExpenseListComponent
  - [ ] PaymentRequestListComponent
  - [ ] PaymentListComponent

### ğŸ”´ Phase 2: å¾…é–‹ç™¼é …ç›®

#### å„ªå…ˆç´š 1: å¯©è¨ˆæ—¥èªŒç³»çµ±ï¼ˆ1 é€±ï¼‰

- [ ] **å»ºç«‹ AuditLogRepository**
  ```bash
  mkdir -p src/app/core/infra/repositories/audit-log
  mkdir -p src/app/core/infra/types/audit-log
  touch src/app/core/infra/repositories/audit-log/audit-log.repository.ts
  touch src/app/core/infra/repositories/audit-log/index.ts
  touch src/app/core/infra/types/audit-log/audit-log.types.ts
  touch src/app/core/infra/types/audit-log/index.ts
  ```
- [ ] **å»ºç«‹ AuditLogService**
  ```bash
  mkdir -p src/app/shared/services/audit-log
  touch src/app/shared/services/audit-log/audit-log.service.ts
  touch src/app/shared/services/audit-log/index.ts
  ```
- [ ] **æ•´åˆ EventBusService** - ç›£è½äº‹ä»¶ä¸¦è‡ªå‹•è¨˜éŒ„
- [ ] **å¯©è¨ˆæ—¥èªŒæŸ¥è©¢ä»‹é¢** - æ™‚é–“è»¸è¦–åœ–
- [ ] **æ›´æ–° core/index.ts** å’Œ **shared/index.ts**

#### å„ªå…ˆç´š 2: æ–½å·¥æ—¥èªŒæ¨¡çµ„ï¼ˆ2 é€±ï¼‰

- [ ] **å»ºç«‹ DiaryRepository**
  ```bash
  mkdir -p src/app/core/infra/repositories/diary
  mkdir -p src/app/core/infra/types/diary
  touch src/app/core/infra/repositories/diary/diary.repository.ts
  touch src/app/core/infra/repositories/diary/index.ts
  touch src/app/core/infra/types/diary/diary.types.ts
  touch src/app/core/infra/types/diary/index.ts
  ```
- [ ] **å»ºç«‹ DiaryService**
  ```bash
  mkdir -p src/app/shared/services/diary
  touch src/app/shared/services/diary/diary.service.ts
  touch src/app/shared/services/diary/index.ts
  ```
- [ ] **å»ºç«‹æ—¥èªŒè·¯ç”±é é¢**
  ```bash
  mkdir -p src/app/routes/blueprint/diary
  touch src/app/routes/blueprint/diary/diary-list.component.ts
  touch src/app/routes/blueprint/diary/diary-form.component.ts
  touch src/app/routes/blueprint/diary/routes.ts
  ```
- [ ] **æ›´æ–°è—åœ–è·¯ç”±** - åŠ å…¥æ—¥èªŒæ¨¡çµ„è·¯ç”±
- [ ] **å»ºç«‹å¤©æ°£é¸æ“‡å™¨å…ƒä»¶** - ä½¿ç”¨ `weather_type` æšèˆ‰
- [ ] **æ—¥èªŒé™„ä»¶åŠŸèƒ½** - æ•´åˆ FileServiceï¼ˆç…§ç‰‡ä¸Šå‚³ï¼‰
- [ ] **æ›´æ–° core/index.ts** å’Œ **shared/index.ts**

#### å„ªå…ˆç´š 3: ä»»å‹™æ¨¡çµ„å®Œå–„ï¼ˆ1 é€±ï¼‰

- [ ] **ä»»å‹™é™„ä»¶åŠŸèƒ½** - æ•´åˆ FileService
- [ ] **ä»»å‹™è©•è«–åŠŸèƒ½** - ä½¿ç”¨ `task_comments` è³‡æ–™è¡¨
- [ ] **ä»»å‹™æ­·å²è¨˜éŒ„** - æ•´åˆå¯©è¨ˆæ—¥èªŒç³»çµ±

#### å„ªå…ˆç´š 4: Supabase Storage é…ç½®ï¼ˆéœ€ Dashboard æ“ä½œï¼‰

- [ ] åœ¨ Supabase Dashboard å»ºç«‹ `blueprint-files` bucket
- [ ] åœ¨ Supabase Dashboard å»ºç«‹ `task-attachments` bucket
- [ ] åœ¨ Supabase Dashboard å»ºç«‹ `diary-photos` bucket
- [ ] è¨­å®š RLS æ”¿ç­–

---

## ğŸ”„ ç‰ˆæœ¬ç‹€æ…‹

### ç•¶å‰ç‰ˆæœ¬

| å¥—ä»¶ | ç‰ˆæœ¬ | ç‹€æ…‹ |
|------|------|------|
| @angular/core | 20.3.0 | âœ… æœ€æ–° |
| @delon/abc | 20.1.0 | âœ… æœ€æ–° |
| ng-zorro-antd | 20.4.3 | âœ… æœ€æ–° |
| @supabase/supabase-js | 2.86.0 | âœ… æœ€æ–° |
| TypeScript | 5.9.2 | âœ… æœ€æ–° |

### Angular 20 ç‰¹æ€§ä½¿ç”¨æƒ…æ³

| ç‰¹æ€§ | ä½¿ç”¨ç‹€æ…‹ | æª”æ¡ˆç¯„ä¾‹ |
|------|---------|---------|
| `signal()`, `computed()` | âœ… å»£æ³›ä½¿ç”¨ | TaskService, BlueprintService, NotificationService |
| `linkedSignal()` | âœ… å·²ä½¿ç”¨ | TaskService.selectedTask |
| `inject()` å‡½æ•¸ | âœ… æ¨™æº–ä½¿ç”¨ | æ‰€æœ‰ Service å’Œ Repository |
| `input()`, `output()` | âœ… éƒ¨åˆ†ä½¿ç”¨ | TaskEditDrawerComponent |
| `@if`, `@for`, `@switch` | âœ… æ¨™æº–ä½¿ç”¨ | æ‰€æœ‰ Component æ¨¡æ¿ |
| `toSignal()`, `toObservable()` | ğŸ”¶ éƒ¨åˆ†ä½¿ç”¨ | å¯æ“´å±•ä½¿ç”¨ |
| `effect()` | âœ… å·²ä½¿ç”¨ | PermissionDirective, HeaderNotifyComponent |

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- [ç³»çµ±æ¶æ§‹](GigHub_Architecture.md)
- [åŠŸèƒ½æ–‡ä»¶](features/README.md)
- [ç”¢å“éœ€æ±‚](prd/construction-site-management.md)
- [Supabase Schema](../seed.sql)
- [Angular å®˜æ–¹æ–‡æª”](https://angular.dev)
- [ng-alain æ–‡æª”](https://ng-alain.com)
- [ng-zorro-antd æ–‡æª”](https://ng.ant.design)
- [Supabase æ–‡æª”](https://supabase.com/docs)

---

## ğŸ¯ ç¸½çµ

åŸºæ–¼å°ˆæ¡ˆæœ€æ–°åˆ†æï¼Œ**éª¨æ¶ç´šåˆ¥åŸºç¤è¨­æ–½å·²å¤§éƒ¨åˆ†å®Œæˆ**ï¼Œç¾åœ¨å»ºè­°çš„é–‹ç™¼é †åºç‚ºï¼š

### ğŸ¨ é›¶éšæ®µï¼šUI ä¸€è‡´æ€§å„ªåŒ–ï¼ˆ1-2 é€±ï¼‰â­â­â­â­â­ (æ–°å¢)

0. **ğŸ“Œ UI ä¸€è‡´æ€§æ”¹é€²** â­â­â­â­â­ (æœ€é«˜å„ªå…ˆ)
   - å»ºç«‹å…±ç”¨æ¨£å¼åº«ï¼ˆ_variables.scss, _stat-cards.scss ç­‰ï¼‰
   - å»ºç«‹å…±ç”¨ UI å…ƒä»¶ï¼ˆPageHeader, StatCard, NavCard ç­‰ï¼‰
   - é‡æ§‹ç¾æœ‰å…ƒä»¶ä½¿ç”¨å…±ç”¨æ¨£å¼
   - ç•¶å‰ UI ä¸€è‡´æ€§è©•åˆ†ï¼š67%ï¼Œç›®æ¨™ï¼š95%

### ğŸ—ï¸ ç¬¬ä¸€éšæ®µï¼šå‰©é¤˜éª¨æ¶ç´šåˆ¥åŸºç¤è¨­æ–½ï¼ˆ1 é€±ï¼‰

1. **ğŸ“Œ æ“ä½œå¯©è¨ˆæ—¥èªŒç³»çµ±** â­â­â­â­ (æœ€é«˜å„ªå…ˆ)
   - ä¼æ¥­åˆè¦è¦æ±‚
   - äº‹ä»¶ç¸½ç·šå·²å®Œæˆï¼Œå¯ç›´æ¥æ•´åˆ
   - æ‰€æœ‰è³‡æ–™è®Šæ›´éƒ½éœ€è¦è¨˜éŒ„

### ğŸ“¦ ç¬¬äºŒéšæ®µï¼šæ¥­å‹™æ¨¡çµ„é–‹ç™¼ï¼ˆ2-4 é€±ï¼‰

2. **ğŸ“Œ æ–½å·¥æ—¥èªŒæ¨¡çµ„** â­â­â­â­â­ (æœ€é«˜å„ªå…ˆ)
   - æ ¸å¿ƒæ¥­å‹™éœ€æ±‚
   - è³‡æ–™åº«çµæ§‹å·²å°±ç·’
   - æª”æ¡ˆç®¡ç†åŸºç¤å·²å®Œæˆï¼Œå¯ç›´æ¥æ•´åˆé™„ä»¶åŠŸèƒ½

3. **ğŸ“Œ ä»»å‹™æ¨¡çµ„å®Œå–„** â­â­â­â­ (é«˜å„ªå…ˆ)
   - é™„ä»¶å’Œè©•è«–åŠŸèƒ½
   - æ­·å²è¨˜éŒ„åŠŸèƒ½
   - æ•´åˆå¯©è¨ˆæ—¥èªŒ

4. **ğŸ“Œ å•é¡Œè¿½è¹¤æ¨¡çµ„** â­â­â­ (ä¸­å„ªå…ˆ)
   - å•é¡Œç®¡ç†åŠŸèƒ½
   - åŸºæ–¼å·²å®Œæˆçš„åŸºç¤è¨­æ–½

### ğŸš€ ç«‹å³é–‹å§‹çš„ç¬¬ä¸€æ­¥

```bash
# å»ºè­°å¾ UI ä¸€è‡´æ€§å„ªåŒ–é–‹å§‹ï¼ˆæå‡ä½¿ç”¨è€…é«”é©—ï¼‰ï¼Œç„¶å¾Œé€²è¡Œå¯©è¨ˆæ—¥èªŒç³»çµ±

# 0. å»ºç«‹å…±ç”¨æ¨£å¼åº«ï¼ˆUI ä¸€è‡´æ€§ï¼‰
mkdir -p src/app/shared/styles
touch src/app/shared/styles/_variables.scss
touch src/app/shared/styles/_stat-cards.scss
touch src/app/shared/styles/_page-header.scss
touch src/app/shared/styles/_filter-card.scss
touch src/app/shared/styles/_drawer.scss
touch src/app/shared/styles/_nav-card.scss
touch src/app/shared/styles/_empty-state.scss

# 1. å»ºç«‹å¯©è¨ˆæ—¥èªŒé¡å‹å®šç¾©
mkdir -p src/app/core/infra/types/audit-log
touch src/app/core/infra/types/audit-log/audit-log.types.ts
touch src/app/core/infra/types/audit-log/index.ts

# 2. å»ºç«‹å¯©è¨ˆæ—¥èªŒ Repository
mkdir -p src/app/core/infra/repositories/audit-log
touch src/app/core/infra/repositories/audit-log/audit-log.repository.ts
touch src/app/core/infra/repositories/audit-log/index.ts

# 3. å»ºç«‹å¯©è¨ˆæ—¥èªŒ Service
mkdir -p src/app/shared/services/audit-log
touch src/app/shared/services/audit-log/audit-log.service.ts
touch src/app/shared/services/audit-log/index.ts

# æˆ–è€…ç›´æ¥é–‹å§‹æ–½å·¥æ—¥èªŒæ¨¡çµ„ï¼ˆå¦‚æœå¯©è¨ˆæ—¥èªŒéç·Šæ€¥éœ€æ±‚ï¼‰

# 1. å»ºç«‹æ—¥èªŒé¡å‹å®šç¾©
mkdir -p src/app/core/infra/types/diary
touch src/app/core/infra/types/diary/diary.types.ts
touch src/app/core/infra/types/diary/index.ts

# 2. å»ºç«‹æ—¥èªŒ Repository
mkdir -p src/app/core/infra/repositories/diary
touch src/app/core/infra/repositories/diary/diary.repository.ts
touch src/app/core/infra/repositories/diary/index.ts

# 3. å»ºç«‹æ—¥èªŒ Service
mkdir -p src/app/shared/services/diary
touch src/app/shared/services/diary/diary.service.ts
touch src/app/shared/services/diary/index.ts
```
## ğŸ“Š åŠŸèƒ½ç¼ºå£åˆ†æï¼ˆContext7 æŸ¥è©¢çµæœï¼‰

> ä»¥ä¸‹åŠŸèƒ½ç¼ºå£åˆ†æåŸºæ–¼ Context7 MCP å·¥å…·æŸ¥è©¢è¡Œæ¥­æ¨™æº–å°ˆæ¡ˆç®¡ç†ç³»çµ±å¾Œï¼Œèˆ‡ GigHub å°ˆæ¡ˆç¾æ³é€²è¡Œæ¯”å°æ‰€å¾—å‡ºã€‚

---

### ğŸ—ï¸ ä¸€ã€å·¥åœ°æ–½å·¥é€²åº¦è¿½è¹¤ç®¡ç†åŸºç¤åŠŸèƒ½ç¼ºå£

**åƒè€ƒä¾†æº**: OpenProject (å°ˆæ¡ˆç®¡ç†ç³»çµ±) + ConstructPro (æ–½å·¥ç®¡ç†å¹³å°)

æ ¹æ“š Context7 æŸ¥è©¢çµæœï¼Œä»¥ä¸‹æ˜¯å·¥åœ°æ–½å·¥é€²åº¦è¿½è¹¤ç®¡ç†ç³»çµ±æ‡‰å…·å‚™çš„**åŸºç¤åŠŸèƒ½**ï¼ˆä¸åŒ…å«åœ–é¢åŠŸèƒ½ï¼‰ï¼š

#### âœ… å·²å¯¦ç¾åŠŸèƒ½

| åŠŸèƒ½ | ç‹€æ…‹ | å°ˆæ¡ˆå¯¦ç¾ |
|------|------|---------|
| ä»»å‹™ CRUD | âœ… 85% | TaskRepository + TaskService |
| ä»»å‹™ç‹€æ…‹æµè½‰ | âœ… | `task_status` æšèˆ‰ |
| ä»»å‹™å„ªå…ˆç´š | âœ… | `task_priority` æšèˆ‰ |
| ä»»å‹™éšå±¤ï¼ˆçˆ¶å­é—œä¿‚ï¼‰ | âœ… | `parent_id` æ¬„ä½ |
| ä»»å‹™æŒ‡æ´¾ | âœ… | `assignee_id` æ¬„ä½ |
| é€²åº¦ç™¾åˆ†æ¯” | âœ… | `completion_rate` æ¬„ä½ |

#### âŒ ç¼ºå¤±çš„åŸºç¤åŠŸèƒ½

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š | å»ºè­°å¯¦ç¾æ–¹å¼ |
|------|------|--------|-------------|
| **æ™‚é–“è¿½è¹¤ (Time Tracking)** | è¨˜éŒ„ä»»å‹™çš„å¯¦éš›å·¥æ™‚ | ğŸ”´ é«˜ | æ–°å¢ `task_time_entries` è³‡æ–™è¡¨ |
| **ä»»å‹™è©•è«–ç³»çµ±** | ä»»å‹™å…§è¨è«–å’Œç•™è¨€ | ğŸ”´ é«˜ | ä½¿ç”¨ `task_comments` è³‡æ–™è¡¨ (å·²å­˜åœ¨æ–¼è¨­è¨ˆ) |
| **ä»»å‹™é™„ä»¶ç®¡ç†** | æ–‡ä»¶ã€åœ–ç‰‡é™„åŠ åˆ°ä»»å‹™ | ğŸ”´ é«˜ | æ•´åˆ `task_attachments` + Supabase Storage |
| **ä»»å‹™æ­·å²è¨˜éŒ„** | è¿½è¹¤ä»»å‹™è®Šæ›´ | ğŸŸ  ä¸­ | æ–°å¢ `task_history` è³‡æ–™è¡¨ |
| **ä»»å‹™æ¨™ç±¤ç³»çµ±** | åˆ†é¡å’Œéæ¿¾ä»»å‹™ | ğŸŸ  ä¸­ | æ–°å¢ `task_labels` + `task_label_assignments` |
| **ä»»å‹™æ¨¡æ¿** | é è¨­ä»»å‹™çµæ§‹ | ğŸŸ¡ ä½ | æ–°å¢ `task_templates` è³‡æ–™è¡¨ |
| **ä»»å‹™ä¾è³´é—œä¿‚** | å‰ç½®/å¾ŒçºŒä»»å‹™é—œè¯ | ğŸŸ  ä¸­ | æ–°å¢ `task_dependencies` è³‡æ–™è¡¨ |
| **æ‰¹æ¬¡åŒ¯å…¥åŒ¯å‡º** | Excel/CSV åŒ¯å…¥ä»»å‹™ | ğŸŸ¡ ä½ | å¾Œç«¯ API + å‰ç«¯è§£æ |
| **å¤šä»»å‹™æ‰¹æ¬¡æ“ä½œ** | æ‰¹æ¬¡æ›´æ–°ç‹€æ…‹/æŒ‡æ´¾ | ğŸŸ  ä¸­ | UI + API æ‰¹æ¬¡ç«¯é» |
| **ä»»å‹™æé†’é€šçŸ¥** | æˆªæ­¢æ—¥æœŸæé†’ | ğŸŸ  ä¸­ | æ•´åˆé€šçŸ¥ç³»çµ± |

#### ğŸ“ æ–½å·¥æ—¥èªŒæ¨¡çµ„ç¼ºå£

æ ¹æ“š ConstructPro çš„æ–½å·¥ç®¡ç†æœ€ä½³å¯¦è¸ï¼š

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š | å»ºè­°å¯¦ç¾ |
|------|------|--------|---------|
| **æ—¥èªŒæ¢ç›®ç®¡ç†** | æ¯æ—¥å¤šç­†å·¥ä½œè¨˜éŒ„ | ğŸ”´ é«˜ | æ–°å¢ `diary_entries` è³‡æ–™è¡¨ |
| **å¤©æ°£è‡ªå‹•ç²å–** | API æ•´åˆå¤©æ°£æœå‹™ | ğŸŸ¡ ä½ | ç¬¬ä¸‰æ–¹å¤©æ°£ API |
| **äººå“¡å‡ºå‹¤è¨˜éŒ„** | æ¯æ—¥å‡ºå·¥äººæ•¸è©³æƒ… | ğŸŸ  ä¸­ | æ–°å¢ `diary_attendance` |
| **ææ–™ä½¿ç”¨è¨˜éŒ„** | ç•¶æ—¥ææ–™æ¶ˆè€— | ğŸŸ  ä¸­ | æ–°å¢ `diary_materials` |
| **è¨­å‚™ä½¿ç”¨è¨˜éŒ„** | ç•¶æ—¥è¨­å‚™é‹è¡Œ | ğŸŸ  ä¸­ | æ–°å¢ `diary_equipment` |
| **æ—¥èªŒå¯©æ ¸æµç¨‹** | ä¸»ç®¡ç°½æ ¸ | ğŸ”´ é«˜ | `approved_by` + `approved_at` å·²æœ‰ |
| **æ—¥èªŒé–å®šæ©Ÿåˆ¶** | å¯©æ ¸å¾Œä¸å¯ç·¨è¼¯ | ğŸ”´ é«˜ | ç‹€æ…‹æµè½‰æ§åˆ¶ |

#### ğŸ“Š é€²åº¦è¦–è¦ºåŒ–ç¼ºå£

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| **ç”˜ç‰¹åœ–è¦–åœ–** | æ™‚é–“è»¸é€²åº¦å±•ç¤º | ğŸ”´ é«˜ |
| **çœ‹æ¿è¦–åœ–** | Kanban é¢¨æ ¼ä»»å‹™ç®¡ç† | âœ… å·²è¨­è¨ˆ (å¾…å¯¦ç¾) |
| **æ—¥æ›†è¦–åœ–** | æŒ‰æ—¥æœŸæŸ¥çœ‹ä»»å‹™ | ğŸŸ  ä¸­ |
| **è³‡æºåˆ†é…è¦–åœ–** | äººå“¡å·¥ä½œè² è¼‰ | ğŸŸ¡ ä½ |
| **é‡Œç¨‹ç¢‘è¿½è¹¤** | é—œéµç¯€é»ç®¡ç† | ğŸŸ  ä¸­ |

---

### ğŸ“¦ äºŒã€é‚è¼¯å®¹å™¨ï¼ˆè—åœ–ç³»çµ±ï¼‰åŠŸèƒ½ç¼ºå£

**åƒè€ƒä¾†æº**: Kubernetes å®¹å™¨ç·¨æ’ + OpenProject å°ˆæ¡ˆç®¡ç†

è—åœ– (Blueprint) ä½œç‚º GigHub çš„æ ¸å¿ƒã€Œé‚è¼¯å®¹å™¨ã€ï¼Œæ‰¿è¼‰å°ˆæ¡ˆæ‰€æœ‰è³‡æ–™å’Œæ¥­å‹™é‚è¼¯ã€‚æ ¹æ“š Context7 æŸ¥è©¢çš„å®¹å™¨æ¶æ§‹æ¨¡å¼ï¼Œä»¥ä¸‹æ˜¯åŠŸèƒ½ç¼ºå£åˆ†æï¼š

#### âœ… å·²å¯¦ç¾çš„å®¹å™¨åŠŸèƒ½

| åŠŸèƒ½ | ç‹€æ…‹ | å¯¦ç¾æ–¹å¼ |
|------|------|---------|
| è—åœ– CRUD | âœ… | BlueprintRepository + BlueprintService |
| è—åœ–æˆå“¡ç®¡ç† | âœ… | `blueprint_members` è³‡æ–™è¡¨ |
| è—åœ–æ¬Šé™è§’è‰² | âœ… | `blueprint_role` æšèˆ‰ |
| æ¥­å‹™è§’è‰² (RBAC) | âœ… | `blueprint_business_role` æšèˆ‰ |
| è‡ªè¨‚è§’è‰²å®šç¾© | ğŸ”¶ 70% | `blueprint_roles` è³‡æ–™è¡¨ |
| åœ˜éšŠæˆæ¬Š | âœ… | `blueprint_team_roles` è³‡æ–™è¡¨ |
| æ¨¡çµ„å•Ÿç”¨æ§åˆ¶ | âœ… | `enabled_modules` æ¬„ä½ |

#### âŒ ç¼ºå¤±çš„å®¹å™¨åŠŸèƒ½

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š | åƒè€ƒæ¨¡å¼ |
|------|------|--------|---------|
| **äº‹ä»¶ç¸½ç·š (Event Bus)** | è·¨æ¨¡çµ„äº‹ä»¶å‚³é | ğŸ”´ é«˜ | Kubernetes EventBus æ¨¡å¼ |
| **è—åœ–æ¨¡æ¿** | é è¨­å°ˆæ¡ˆæ¨¡æ¿ | ğŸŸ  ä¸­ | æ¨¡æ¿è¤‡è£½æ©Ÿåˆ¶ |
| **è—åœ–è¤‡è£½/åˆ†å‰** | è¤‡è£½ç¾æœ‰è—åœ– | ğŸŸ  ä¸­ | æ·±åº¦è¤‡è£½é‚è¼¯ |
| **è—åœ–å°å­˜æ©Ÿåˆ¶** | å®Œæˆå°ˆæ¡ˆæ­¸æª” | ğŸŸ¡ ä½ | ç‹€æ…‹ + å”¯è®€æ¨¡å¼ |
| **è—åœ–æ¨™ç±¤åˆ†é¡** | å°ˆæ¡ˆåˆ†é¡æ¨™ç±¤ | ğŸŸ¡ ä½ | `blueprint_labels` è³‡æ–™è¡¨ |
| **è—åœ–æœå°‹å¼•æ“** | å…¨æ–‡æª¢ç´¢ | ğŸ”´ é«˜ | PostgreSQL FTS æˆ– Supabase æœå°‹ |
| **å­˜å–æ—¥èªŒå¯©è¨ˆ** | æ“ä½œè¨˜éŒ„ | ğŸŸ  ä¸­ | `audit_logs` è³‡æ–™è¡¨ |
| **è³‡æºé…é¡ç®¡ç†** | å®¹é‡é™åˆ¶ | ğŸŸ¡ ä½ | å„²å­˜/æˆå“¡æ•¸é™åˆ¶ |

#### ğŸ”§ æ¬Šé™æ§åˆ¶é€²éšéœ€æ±‚

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| **ç´°ç²’åº¦æ¬Šé™** | æŒ‰åŠŸèƒ½æ¨¡çµ„æ¬Šé™ | ğŸ”´ é«˜ |
| **æ¬Šé™ç¹¼æ‰¿** | çµ„ç¹”â†’è—åœ–æ¬Šé™ç¹¼æ‰¿ | ğŸŸ  ä¸­ |
| **è‡¨æ™‚å­˜å–** | é™æ™‚å­˜å–æ¬Š | ğŸŸ¡ ä½ |
| **æ¬Šé™å¯©æ‰¹æµ** | å­˜å–è«‹æ±‚å¯©æ ¸ | ğŸŸ¡ ä½ |
| **æ¬Šé™æŒ‡ä»¤å…ƒä»¶** | `*hasPermission` Directive | ğŸ”´ é«˜ |

#### ğŸ“¡ å®¹å™¨ç·¨æ’æ¨¡å¼ç¼ºå£

æ ¹æ“š Kubernetes å®¹å™¨ç·¨æ’æœ€ä½³å¯¦è¸ï¼š

| æ¨¡å¼ | èªªæ˜ | å°ˆæ¡ˆå°æ‡‰ | ç‹€æ…‹ |
|------|------|---------|------|
| **å¥åº·æª¢æŸ¥ (Health Check)** | æœå‹™ç‹€æ…‹ç›£æ§ | è—åœ–ç‹€æ…‹ç›£æ§ | âŒ æœªå¯¦ç¾ |
| **è‡ªå‹•æ“´å±• (Auto-scaling)** | è³‡æºå‹•æ…‹èª¿é… | ä¸é©ç”¨ | N/A |
| **æ»¾å‹•æ›´æ–° (Rolling Update)** | å¹³æ»‘é·ç§» | è³‡æ–™é·ç§»æ©Ÿåˆ¶ | âŒ æœªå¯¦ç¾ |
| **æœå‹™ç™¼ç¾ (Service Discovery)** | æ¨¡çµ„é–“é€šè¨Š | äº‹ä»¶ç¸½ç·š | âŒ æœªå¯¦ç¾ |
| **é…ç½®ç®¡ç† (Config Management)** | ç’°å¢ƒé…ç½® | è—åœ–è¨­å®š | ğŸ”¶ éƒ¨åˆ† |
| **æ—¥èªŒèšåˆ (Log Aggregation)** | é›†ä¸­æ—¥èªŒ | å¯©è¨ˆæ—¥èªŒ | âŒ æœªå¯¦ç¾ |

---

### ğŸ¢ ä¸‰ã€SaaS ä¼æ¥­åŒ–æ¨™æº–åŠŸèƒ½ç¼ºå£

**åƒè€ƒä¾†æº**: Tenancy for Laravel (Multi-tenancy) + SaaSykit + Auth0 B2B SaaS Starter

æ ¹æ“š Context7 æŸ¥è©¢çš„ SaaS ä¼æ¥­åŒ–æ¨™æº–ï¼Œä»¥ä¸‹æ˜¯ GigHub å°ˆæ¡ˆç¼ºå¤±çš„é—œéµåŠŸèƒ½ï¼š

#### âœ… å·²å¯¦ç¾çš„ SaaS åŠŸèƒ½

| åŠŸèƒ½ | ç‹€æ…‹ | å¯¦ç¾æ–¹å¼ |
|------|------|---------|
| å¤šç§Ÿæˆ¶æ¶æ§‹ | âœ… | çµ„ç¹” (Organization) éš”é›¢ |
| ç”¨æˆ¶èªè­‰ | âœ… | Supabase Auth |
| çµ„ç¹”æˆå“¡ç®¡ç† | âœ… | `organization_members` |
| è§’è‰²æ¬Šé™ (RBAC) | ğŸ”¶ 70% | å¤šå±¤è§’è‰²ç³»çµ± |
| Row Level Security | âœ… | PostgreSQL RLS |

#### âŒ ç¼ºå¤±çš„ SaaS ä¼æ¥­åŒ–åŠŸèƒ½

##### ğŸ” èªè­‰èˆ‡å®‰å…¨

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š | åƒè€ƒå¯¦ç¾ |
|------|------|--------|---------|
| **SSO/SAML æ•´åˆ** | ä¼æ¥­ç´šå–®ä¸€ç™»å…¥ | ğŸ”´ é«˜ | Supabase SSO |
| **MFA å¤šå› ç´ é©—è­‰** | äºŒæ¬¡é©—è­‰ | ğŸ”´ é«˜ | Supabase MFA |
| **IP ç™½åå–®** | å­˜å–ä¾†æºé™åˆ¶ | ğŸŸ  ä¸­ | çµ„ç¹”è¨­å®š |
| **Session ç®¡ç†** | ç™»å…¥è£ç½®ç®¡ç† | ğŸŸ  ä¸­ | Supabase Sessions |
| **å¯†ç¢¼æ”¿ç­–** | è¤‡é›œåº¦è¦æ±‚ | ğŸŸ  ä¸­ | Auth è¨­å®š |
| **ç™»å…¥ç¨½æ ¸æ—¥èªŒ** | ç™»å…¥è¨˜éŒ„ | ğŸ”´ é«˜ | `auth_audit_logs` |

##### ğŸ‘¥ ç§Ÿæˆ¶ç®¡ç†

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š | åƒè€ƒå¯¦ç¾ |
|------|------|--------|---------|
| **çµ„ç¹”é‚€è«‹ç³»çµ±** | é‚€è«‹é€£çµ/Email | âœ… å·²æœ‰åŸºç¤ | éœ€å®Œå–„ |
| **çµ„ç¹”å“ç‰Œè¨­å®š** | Logo/ä¸»é¡Œè‰² | ğŸŸ¡ ä½ | çµ„ç¹”è¨­å®šé é¢ |
| **çµ„ç¹”ç™½æ¨™** | è‡ªè¨‚åŸŸå | ğŸŸ¡ ä½ | DNS + è·¯ç”± |
| **çµ„ç¹”è³‡æ–™åˆªé™¤** | ç§Ÿæˆ¶éŠ·æ¯€ | ğŸŸ  ä¸­ | Cascade Delete |
| **çµ„ç¹”åˆ‡æ›** | å¤šçµ„ç¹”ç”¨æˆ¶ | âœ… | WorkspaceContext |

##### ğŸ“Š ä¼æ¥­åˆ†æèˆ‡å ±è¡¨

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| **ä½¿ç”¨çµ±è¨ˆ Dashboard** | ç®¡ç†å“¡å„€è¡¨æ¿ | ğŸ”´ é«˜ |
| **ç”¨æˆ¶æ´»èºåº¦åˆ†æ** | DAU/MAU | ğŸŸ  ä¸­ |
| **åŠŸèƒ½ä½¿ç”¨è¿½è¹¤** | Feature Usage | ğŸŸ  ä¸­ |
| **æ•ˆèƒ½ç›£æ§** | Response Time | ğŸŸ¡ ä½ |
| **éŒ¯èª¤è¿½è¹¤** | Error Tracking | ğŸŸ  ä¸­ |

##### ğŸ”” é€šçŸ¥èˆ‡æºé€š

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š | å°ˆæ¡ˆç‹€æ…‹ |
|------|------|--------|---------|
| **æ‡‰ç”¨å…§é€šçŸ¥** | å³æ™‚é€šçŸ¥ | ğŸ”´ é«˜ | è³‡æ–™è¡¨å·²è¨­è¨ˆ |
| **Email é€šçŸ¥** | éƒµä»¶æé†’ | ğŸ”´ é«˜ | âŒ æœªå¯¦ç¾ |
| **é€šçŸ¥åå¥½è¨­å®š** | ç”¨æˆ¶è¨­å®š | ğŸŸ  ä¸­ | è³‡æ–™è¡¨å·²è¨­è¨ˆ |
| **Webhook æ•´åˆ** | ç¬¬ä¸‰æ–¹æ•´åˆ | ğŸŸ  ä¸­ | âŒ æœªå¯¦ç¾ |
| **Realtime æ¨é€** | å³æ™‚æ›´æ–° | ğŸ”´ é«˜ | Supabase Realtime |

##### ğŸ“ åˆè¦èˆ‡å¯©è¨ˆ

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| **æ“ä½œå¯©è¨ˆæ—¥èªŒ** | å®Œæ•´æ“ä½œè¨˜éŒ„ | ğŸ”´ é«˜ |
| **è³‡æ–™å­˜å–æ—¥èªŒ** | æ•æ„Ÿè³‡æ–™å­˜å– | ğŸŸ  ä¸­ |
| **SLA ç›£æ§** | æœå‹™ç­‰ç´šå”è­° | ğŸŸ¡ ä½ |[æ“±ç½®]
| **å‚™ä»½èˆ‡æ¢å¾©** | è³‡æ–™å‚™ä»½ | ğŸ”´ é«˜ |[æ“±ç½®]

---

### ğŸ“‹ åŠŸèƒ½ç¼ºå£å„ªå…ˆç´šç¸½çµ

#### ğŸ”´ æœ€é«˜å„ªå…ˆç´šï¼ˆç«‹å³å¯¦ç¾ï¼‰

1. **æ™‚é–“è¿½è¹¤ç³»çµ±** - æ–½å·¥ç®¡ç†æ ¸å¿ƒ
2. **ä»»å‹™è©•è«–åŠŸèƒ½** - åœ˜éšŠå”ä½œå¿…éœ€
3. **é€šçŸ¥ä¸­å¿ƒ** - å³æ™‚è³‡è¨Šæ¨é€
4. **äº‹ä»¶ç¸½ç·š** - æ¨¡çµ„é–“è§£è€¦
5. **æ¬Šé™æŒ‡ä»¤å…ƒä»¶** - UI æ¬Šé™æ§åˆ¶
6. **æ“ä½œå¯©è¨ˆæ—¥èªŒ** - ä¼æ¥­åˆè¦è¦æ±‚

#### ğŸŸ  é«˜å„ªå…ˆç´šï¼ˆçŸ­æœŸç›®æ¨™ï¼‰

1. **ä»»å‹™æ­·å²è¨˜éŒ„** - è®Šæ›´è¿½è¹¤
2. **ä»»å‹™æ¨™ç±¤ç³»çµ±** - åˆ†é¡ç®¡ç†
3. **ä»»å‹™ä¾è³´é—œä¿‚** - é€²åº¦è¦åŠƒ
4. **è—åœ–æ¨¡æ¿** - å¿«é€Ÿå»ºç«‹å°ˆæ¡ˆ
5. **ç´°ç²’åº¦æ¬Šé™** - ç²¾ç¢ºå­˜å–æ§åˆ¶
6. **Email é€šçŸ¥** - éå¯¦æ™‚æé†’

#### ğŸŸ¡ ä¸€èˆ¬å„ªå…ˆç´šï¼ˆä¸­æœŸç›®æ¨™ï¼‰

1. **ä»»å‹™æ¨¡æ¿** - é‡è¤‡ä»»å‹™
2. **æ‰¹æ¬¡åŒ¯å…¥åŒ¯å‡º** - è³‡æ–™é·ç§»
3. **è—åœ–å°å­˜** - å°ˆæ¡ˆæ­¸æª”
4. **çµ„ç¹”å“ç‰Œè¨­å®š** - ç™½æ¨™éœ€æ±‚
5. **å¤©æ°£ API æ•´åˆ** - è‡ªå‹•åŒ–

---

## ğŸ”® æœªä¾†è¦åŠƒåŠŸèƒ½

> ä»¥ä¸‹åŠŸèƒ½ç‚ºä¸­é•·æœŸè¦åŠƒï¼Œå¾…ç¾éšæ®µæ ¸å¿ƒåŠŸèƒ½å®Œæˆå¾Œå†é€²è¡Œé–‹ç™¼ã€‚

### ğŸ“‹ è¦åŠƒåŠŸèƒ½ç¸½è¦½

| åŠŸèƒ½æ¨¡çµ„ | å„ªå…ˆç´š | èªªæ˜ | å»ºè­°å¯¦ç¾æ–¹å¼ |
|---------|--------|------|-------------|
| ğŸ”„ å·¥ä½œæµç¨‹å¼•æ“ | â­â­â­â­â­ | ä»»å‹™å®Œæˆâ†’æäº¤â†’æ—¥èªŒå¯å‘ˆå ±â†’å“ç®¡æª¢æŸ¥â†’é©—æ”¶ | è¼•é‡ç´š WorkflowService + ç‹€æ…‹æ©Ÿæ¨¡å¼ï¼Œæ•´åˆ EventBusService |
| ğŸ’¬ è©•è«–ç³»çµ± | â­â­â­â­â­ | å¤šæ¨¡çµ„å…±ç”¨çš„è©•è«–åŠŸèƒ½ | é€šç”¨ CommentService + `task_comments` è³‡æ–™è¡¨ |
| ğŸ·ï¸ æ¨™ç±¤ç³»çµ± | â­â­â­â­ | å¤šæ¨¡çµ„å…±ç”¨çš„æ¨™ç±¤åˆ†é¡ | é€šç”¨ TagService + `task_tags` è³‡æ–™è¡¨ |
| ğŸ¯ é‡Œç¨‹ç¢‘ç®¡ç† | â­â­â­â­ | é—œéµç¯€é»è¿½è¹¤ | æ–°å¢ `milestones` è³‡æ–™è¡¨ï¼Œæ•´åˆç”˜ç‰¹åœ– |
| ğŸ“… çœ‹æ¿/ç”˜ç‰¹åœ– | â­â­â­â­ | è¦–è¦ºåŒ–é€²åº¦ç®¡ç† | çœ‹æ¿ï¼šæ“´å±•ç¾æœ‰è¦–åœ–ï¼›ç”˜ç‰¹åœ–ï¼šå¼•å…¥ ngx-gantt æˆ– dhtmlx-gantt |
| âš ï¸ é¢¨éšªç®¡ç† | â­â­â­ | é¢¨éšªç™»è¨˜èˆ‡è¿½è¹¤ | è³‡æ–™è¡¨ + åŸºæœ¬ CRUD å¯¦ä½œ MVPï¼Œæœªä¾†æ“´å±•é¢¨éšªè©•ä¼°çŸ©é™£ |
| ğŸ“Š å„€è¡¨æ¿å¼•æ“ | â­â­â­ | å¯è¦–åŒ–æ•¸æ“šé¢æ¿ | å…ˆç”¨ ng-zorro Chart/Statistic çµ„è£ï¼Œæœªä¾†è€ƒæ…® Dashboard Builder |
| ğŸ“ˆ å ±è¡¨ä¸­å¿ƒ | â­â­â­ | BI åˆ†æèˆ‡å ±è¡¨åŒ¯å‡º | é å®šç¾©å ±è¡¨ + PDF/Excel åŒ¯å‡ºï¼Œæœªä¾†æ“´å±•å ±è¡¨è¨­è¨ˆå™¨ |

### ğŸ”„ å·¥ä½œæµç¨‹å¼•æ“ï¼ˆWorkflow / Lifecycleï¼‰

**éœ€æ±‚èƒŒæ™¯**ï¼šæ”¯æ´æ–½å·¥ç®¡ç†çš„æ¨™æº–æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä»»å‹™å®Œæˆ   â”‚ â”€â†’ â”‚    æäº¤     â”‚ â”€â†’ â”‚ æ—¥èªŒå¯å‘ˆå ±  â”‚ â”€â†’ â”‚  å“ç®¡æª¢æŸ¥   â”‚ â”€â†’ â”‚    é©—æ”¶     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å»ºè­°å¯¦ç¾æ–¹å¼**ï¼š
- å»ºç«‹è¼•é‡ç´š `WorkflowService`ï¼Œæ¡ç”¨ç‹€æ…‹æ©Ÿæ¨¡å¼
- æ•´åˆå·²å®Œæˆçš„ `EventBusService` ä½œç‚ºæµç¨‹è§¸ç™¼å™¨
- æ”¯æ´å¤šéšæ®µå¯©æ‰¹æµç¨‹
- å¯é…ç½®çš„ç‹€æ…‹è½‰æ›è¦å‰‡

**é è¨ˆçµæ§‹**ï¼š
```
src/app/shared/services/workflow/
â”œâ”€â”€ workflow.service.ts       # å·¥ä½œæµç¨‹æœå‹™
â”œâ”€â”€ workflow.types.ts         # ç‹€æ…‹æ©Ÿé¡å‹å®šç¾©
â”œâ”€â”€ workflow-engine.ts        # æµç¨‹å¼•æ“æ ¸å¿ƒ
â””â”€â”€ index.ts
```

### ğŸ’¬ è©•è«–ç³»çµ±

**éœ€æ±‚èƒŒæ™¯**ï¼šä»»å‹™ã€æ—¥èªŒã€å•é¡Œç­‰å¤šæ¨¡çµ„éƒ½éœ€è¦è©•è«–åŠŸèƒ½

**å»ºè­°å¯¦ç¾æ–¹å¼**ï¼š
- å»ºç«‹é€šç”¨ `CommentService` ä¾›å¤šæ¨¡çµ„ä½¿ç”¨
- è¤‡ç”¨å·²å­˜åœ¨çš„ `task_comments` è³‡æ–™è¡¨çµæ§‹
- æ”¯æ´ @æåŠã€é™„ä»¶ã€è¡¨æƒ…å›æ‡‰

**é è¨ˆçµæ§‹**ï¼š
```
src/app/shared/services/comment/
â”œâ”€â”€ comment.service.ts        # è©•è«–æœå‹™
â”œâ”€â”€ comment.types.ts          # è©•è«–é¡å‹å®šç¾©
â””â”€â”€ index.ts

src/app/shared/components/comment/
â”œâ”€â”€ comment-list.component.ts # è©•è«–åˆ—è¡¨å…ƒä»¶
â”œâ”€â”€ comment-form.component.ts # è©•è«–è¡¨å–®å…ƒä»¶
â””â”€â”€ index.ts
```

### ğŸ·ï¸ æ¨™ç±¤ç³»çµ±

**éœ€æ±‚èƒŒæ™¯**ï¼šä»»å‹™ã€å•é¡Œç­‰éœ€è¦éˆæ´»çš„åˆ†é¡æ¨™ç±¤

**å»ºè­°å¯¦ç¾æ–¹å¼**ï¼š
- å»ºç«‹é€šç”¨ `TagService`
- è¤‡ç”¨å·²å­˜åœ¨çš„ `task_tags` è³‡æ–™è¡¨çµæ§‹
- æ”¯æ´å¤šè‰²æ¨™ç±¤ã€æ¨™ç±¤ç¾¤çµ„

### ğŸ¯ é‡Œç¨‹ç¢‘ç®¡ç†ç³»çµ±

**éœ€æ±‚èƒŒæ™¯**ï¼šè¿½è¹¤å°ˆæ¡ˆé—œéµç¯€é»

**å»ºè­°å¯¦ç¾æ–¹å¼**ï¼š
- æ–°å¢ `milestones` è³‡æ–™è¡¨
- èˆ‡ç”˜ç‰¹åœ–æ•´åˆé¡¯ç¤º
- æ”¯æ´é‡Œç¨‹ç¢‘å®Œæˆåº¦è¨ˆç®—

### ğŸ“… çœ‹æ¿/ç”˜ç‰¹åœ–è¦–åœ–

**éœ€æ±‚èƒŒæ™¯**ï¼šè¦–è¦ºåŒ–é€²åº¦ç®¡ç†

**å»ºè­°å¯¦ç¾æ–¹å¼**ï¼š
- **çœ‹æ¿**ï¼šæ“´å±•ç¾æœ‰ `TasksComponent` çš„çœ‹æ¿è¦–åœ–
- **ç”˜ç‰¹åœ–**ï¼šå¼•å…¥ç¬¬ä¸‰æ–¹å…ƒä»¶
  - é¸é … 1: [ngx-gantt](https://github.com/nickvdyck/ngx-gantt)
  - é¸é … 2: [dhtmlx-gantt](https://dhtmlx.com/docs/products/dhtmlxGantt/)

### âš ï¸ é¢¨éšªç®¡ç†ï¼ˆRisk Registerï¼‰

**éœ€æ±‚èƒŒæ™¯**ï¼šå°ˆæ¡ˆé¢¨éšªè­˜åˆ¥èˆ‡è¿½è¹¤

**å»ºè­°å¯¦ç¾æ–¹å¼**ï¼ˆMVP éšæ®µï¼‰ï¼š
- æ–°å¢ `project_risks` è³‡æ–™è¡¨
- åŸºæœ¬ CRUD æ“ä½œ
- é¢¨éšªç­‰ç´šåˆ†é¡ï¼ˆé«˜/ä¸­/ä½ï¼‰

**æœªä¾†æ“´å±•**ï¼š
- é¢¨éšªè©•ä¼°çŸ©é™£ï¼ˆå½±éŸ¿ Ã— æ©Ÿç‡ï¼‰
- é¢¨éšªæé†’é€šçŸ¥
- é¢¨éšªå ±è¡¨

### ğŸ“Š å„€è¡¨æ¿å¼•æ“

**éœ€æ±‚èƒŒæ™¯**ï¼šå°ˆæ¡ˆæ¦‚è¦½èˆ‡æ•¸æ“šå¯è¦–åŒ–

**å»ºè­°å¯¦ç¾æ–¹å¼**ï¼ˆåˆæœŸï¼‰ï¼š
- ä½¿ç”¨ ng-zorro çš„ Chart/Statistic å…ƒä»¶çµ„è£
- é è¨­å„€è¡¨æ¿ä½ˆå±€

**æœªä¾†æ“´å±•**ï¼š
- Dashboard Builder è®“ç”¨æˆ¶è‡ªè¨‚
- Widget æ‹–æ‹‰æ’ç‰ˆ
- å„€è¡¨æ¿åˆ†äº«

### ğŸ“ˆ å ±è¡¨ä¸­å¿ƒï¼ˆBI / Reportsï¼‰

**éœ€æ±‚èƒŒæ™¯**ï¼šå°ˆæ¡ˆé€²åº¦èˆ‡è²¡å‹™åˆ†æ

**å»ºè­°å¯¦ç¾æ–¹å¼**ï¼ˆåˆæœŸï¼‰ï¼š
- é å®šç¾©å ±è¡¨æ¨¡æ¿
- PDF/Excel åŒ¯å‡ºåŠŸèƒ½

**æœªä¾†æ“´å±•**ï¼š
- å ±è¡¨è¨­è¨ˆå™¨
- è‡ªè¨‚å ±è¡¨åƒæ•¸
- æ’ç¨‹å ±è¡¨

---

### ğŸ”— ç›¸é—œè³‡æº

- [OpenProject å°ˆæ¡ˆç®¡ç†æ–‡æª”](https://www.openproject.org/docs/)
- [ConstructPro æ–½å·¥ç®¡ç†å¹³å°](https://github.com/ozcanbicervv-create/constructpro-)
- [Tenancy for Laravel å¤šç§Ÿæˆ¶æ¡†æ¶](https://tenancyforlaravel.com/)
- [Finbuckle.MultiTenant .NET å¤šç§Ÿæˆ¶](https://www.finbuckle.com/MultiTenant/)
- [SaaSykit Laravel SaaS å¥—ä»¶](https://saasykit.com/)
- [Auth0 B2B SaaS Starter](https://github.com/auth0-developer-hub/auth0-b2b-saas-starter)
- [Kubernetes å®¹å™¨ç·¨æ’](https://kubernetes.io/docs/)

---

**æœ€å¾Œæ›´æ–°**: 2025-12-04
**åˆ†æåŸºæº–**: å°ˆæ¡ˆæœ€æ–°ç¨‹å¼ç¢¼ç‹€æ…‹ + Context7 MCP æŸ¥è©¢çµæœï¼ˆng-zorro-antd + ng-alain UI æœ€ä½³å¯¦è¸ï¼‰
