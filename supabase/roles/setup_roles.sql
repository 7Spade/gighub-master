-- ============================================================================
-- Role Setup Reference
-- Description: 角色與權限設定參考
-- Created: 2024-12-01
-- ============================================================================
-- 
-- Supabase 預設角色說明：
-- 
-- 1. anon (匿名角色)
--    - 未認證使用者
--    - 只能存取公開資料
--    - 使用案例：公開藍圖讀取
-- 
-- 2. authenticated (認證角色)
--    - 已登入使用者
--    - 受 RLS 政策保護
--    - 使用案例：所有業務操作
-- 
-- 3. service_role (服務角色)
--    - 後端服務專用
--    - 繞過 RLS 政策
--    - 使用案例：後端 API、Webhooks
-- 
-- ============================================================================
-- 權限設計原則
-- ============================================================================
-- 
-- 1. 最小權限原則
--    - 只授予必要的權限
--    - 優先使用 RLS 而非 GRANT
-- 
-- 2. 分層授權
--    - 表格權限：SELECT, INSERT, UPDATE, DELETE
--    - 函數權限：EXECUTE
--    - Schema 權限：USAGE
-- 
-- 3. RLS 優先
--    - 所有 public schema 表格啟用 RLS
--    - 使用 RLS 政策控制資料存取
-- 
-- ============================================================================
-- 基礎權限設定 (由 Supabase 自動處理)
-- ============================================================================

-- Schema 權限
-- GRANT USAGE ON SCHEMA public TO anon;
-- GRANT USAGE ON SCHEMA public TO authenticated;

-- 認證角色的基礎表格權限 (透過 RLS 控制)
-- GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO authenticated;

-- 匿名角色的有限權限
-- GRANT SELECT ON public.blueprints TO anon;

-- ============================================================================
